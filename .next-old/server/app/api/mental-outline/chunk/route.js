"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/mental-outline/chunk/route";
exports.ids = ["app/api/mental-outline/chunk/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:path");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmental-outline%2Fchunk%2Froute&page=%2Fapi%2Fmental-outline%2Fchunk%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmental-outline%2Fchunk%2Froute.ts&appDir=C%3A%5Ctfm-uoc-ia%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Ctfm-uoc-ia&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmental-outline%2Fchunk%2Froute&page=%2Fapi%2Fmental-outline%2Fchunk%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmental-outline%2Fchunk%2Froute.ts&appDir=C%3A%5Ctfm-uoc-ia%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Ctfm-uoc-ia&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_tfm_uoc_ia_app_api_mental_outline_chunk_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/mental-outline/chunk/route.ts */ \"(rsc)/./app/api/mental-outline/chunk/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/mental-outline/chunk/route\",\n        pathname: \"/api/mental-outline/chunk\",\n        filename: \"route\",\n        bundlePath: \"app/api/mental-outline/chunk/route\"\n    },\n    resolvedPagePath: \"C:\\\\tfm-uoc-ia\\\\app\\\\api\\\\mental-outline\\\\chunk\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_tfm_uoc_ia_app_api_mental_outline_chunk_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/mental-outline/chunk/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZtZW50YWwtb3V0bGluZSUyRmNodW5rJTJGcm91dGUmcGFnZT0lMkZhcGklMkZtZW50YWwtb3V0bGluZSUyRmNodW5rJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGbWVudGFsLW91dGxpbmUlMkZjaHVuayUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDdGZtLXVvYy1pYSU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q3RmbS11b2MtaWEmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ1M7QUFDdEY7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm0tdW9jLWlhLz80MDk4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXHRmbS11b2MtaWFcXFxcYXBwXFxcXGFwaVxcXFxtZW50YWwtb3V0bGluZVxcXFxjaHVua1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvbWVudGFsLW91dGxpbmUvY2h1bmsvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9tZW50YWwtb3V0bGluZS9jaHVua1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvbWVudGFsLW91dGxpbmUvY2h1bmsvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFx0Zm0tdW9jLWlhXFxcXGFwcFxcXFxhcGlcXFxcbWVudGFsLW91dGxpbmVcXFxcY2h1bmtcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL21lbnRhbC1vdXRsaW5lL2NodW5rL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmental-outline%2Fchunk%2Froute&page=%2Fapi%2Fmental-outline%2Fchunk%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmental-outline%2Fchunk%2Froute.ts&appDir=C%3A%5Ctfm-uoc-ia%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Ctfm-uoc-ia&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/mental-outline/chunk/route.ts":
/*!***********************************************!*\
  !*** ./app/api/mental-outline/chunk/route.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_qa_promptsMentalOutline__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/qa/promptsMentalOutline */ \"(rsc)/./lib/qa/promptsMentalOutline.ts\");\n/* harmony import */ var _lib_qa_callModel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/qa/callModel */ \"(rsc)/./lib/qa/callModel.ts\");\n/* harmony import */ var _lib_logging_logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/logging/logger */ \"(rsc)/./lib/logging/logger.ts\");\n/* harmony import */ var _lib_pdf_pagesMap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/pdf/pagesMap */ \"(rsc)/./lib/pdf/pagesMap.ts\");\n/* harmony import */ var _lib_schema_mentalOutline__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/schema/mentalOutline */ \"(rsc)/./lib/schema/mentalOutline.ts\");\n/* harmony import */ var ajv_dist_2020__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ajv/dist/2020 */ \"(rsc)/./node_modules/ajv/dist/2020.js\");\n/* harmony import */ var ajv_dist_2020__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(ajv_dist_2020__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var ajv_formats__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ajv-formats */ \"(rsc)/./node_modules/ajv-formats/dist/index.js\");\n/* harmony import */ var ajv_formats__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(ajv_formats__WEBPACK_IMPORTED_MODULE_7__);\n\n\n\n\n\n\n\n\nconst runtime = \"nodejs\";\nconst ajv = new (ajv_dist_2020__WEBPACK_IMPORTED_MODULE_6___default())({\n    allErrors: true\n});\najv_formats__WEBPACK_IMPORTED_MODULE_7___default()(ajv);\nconst validateMentalOutline = ajv.compile(_lib_schema_mentalOutline__WEBPACK_IMPORTED_MODULE_5__.mentalOutlineSchema);\nfunction sanitizeArticleText(text) {\n    if (!text) return text;\n    const firstLine = text.split(/\\n+/)[0]?.trim() || \"\";\n    if (firstLine.length <= 220) return firstLine;\n    return `${firstLine.slice(0, 217).trimEnd()}…`;\n}\nfunction sanitizeOutline(outline) {\n    if (!outline || typeof outline !== \"object\") return outline;\n    const slugify = (input, fallback)=>{\n        const value = typeof input === \"string\" ? input : \"\";\n        const slug = value.toLowerCase().normalize(\"NFD\").replace(/[^\\p{Letter}\\p{Number}]+/gu, \"-\").replace(/^-+|-+$/g, \"\").replace(/-+/g, \"-\");\n        return slug || fallback;\n    };\n    const toPagesArray = (pages)=>{\n        if (!Array.isArray(pages)) return [];\n        const filtered = pages.map((n)=>typeof n === \"number\" ? Math.trunc(n) : Number(n)).filter((n)=>Number.isInteger(n) && n > 0);\n        return Array.from(new Set(filtered)).sort((a, b)=>a - b);\n    };\n    const ensureAnchor = (value, seed, fallbackPrefix)=>{\n        if (typeof value === \"string\" && value.trim().length) return value.trim();\n        return slugify(seed, fallbackPrefix);\n    };\n    const deriveOrdinal = (raw, text, regex, fallback)=>{\n        if (typeof raw === \"string\" && raw.trim().length) return raw.trim();\n        const match = text.match(regex);\n        if (match && match[1]) return match[1].toUpperCase();\n        return fallback;\n    };\n    const sanitizeArticulos = (articulos)=>{\n        if (!Array.isArray(articulos)) return [];\n        return articulos.filter((art)=>art && typeof art === \"object\").map((art)=>{\n            const numero = (()=>{\n                if (typeof art?.numero === \"string\" && art.numero.trim().length) return art.numero.trim();\n                if (typeof art?.articulo_num === \"number\") return String(art.articulo_num);\n                if (typeof art?.articulo_num === \"string\" && art.articulo_num.trim().length) return art.articulo_num.trim();\n                if (typeof art?.articulo === \"string\" && art.articulo.trim().length) return art.articulo.trim();\n                if (typeof art?.articulo_numero === \"string\" && art.articulo_numero.trim().length) return art.articulo_numero.trim();\n                return \"?\";\n            })();\n            const texto = sanitizeArticleText(art?.articulo_texto || art?.texto_encabezado || (typeof art?.titulo === \"string\" ? art.titulo : \"\") || `Artículo ${numero}`);\n            const anchor = ensureAnchor(art?.anchor, `${texto || numero}`, `articulo-${numero}`);\n            const pageSource = art?.pages ?? art?.rango_paginas ?? art?.rango ?? art?.page ?? null;\n            return {\n                numero,\n                articulo_texto: texto || `Artículo ${numero}`,\n                anchor,\n                pages: toPagesArray(pageSource)\n            };\n        });\n    };\n    const sanitizeSecciones = (secciones)=>{\n        if (!Array.isArray(secciones)) return [];\n        return secciones.filter((sec)=>sec && typeof sec === \"object\").map((sec)=>{\n            const baseText = typeof sec?.seccion_texto === \"string\" && sec.seccion_texto.trim().length ? sec.seccion_texto.trim() : typeof sec?.titulo === \"string\" && sec.titulo.trim().length ? sec.titulo.trim() : \"\";\n            const ordinal = deriveOrdinal(sec?.ordinal, baseText, /SECCI[ÓO]N\\s+([IVXLCDM]+|\\d+)/i, \"?\");\n            const seccionTexto = baseText || `SECCIÓN ${ordinal}`;\n            const anchor = ensureAnchor(sec?.anchor, seccionTexto, `seccion-${ordinal}`);\n            return {\n                ordinal,\n                seccion_texto: seccionTexto,\n                anchor,\n                pages: toPagesArray(sec?.pages),\n                articulos: sanitizeArticulos(sec?.articulos)\n            };\n        });\n    };\n    const sanitizeCapitulos = (capitulos)=>{\n        if (!Array.isArray(capitulos)) return [];\n        return capitulos.filter((cap)=>cap && typeof cap === \"object\").map((cap)=>{\n            const baseText = typeof cap?.capitulo_texto === \"string\" && cap.capitulo_texto.trim().length ? cap.capitulo_texto.trim() : typeof cap?.titulo === \"string\" && cap.titulo.trim().length ? cap.titulo.trim() : \"\";\n            const ordinal = deriveOrdinal(cap?.ordinal, baseText, /CAP[ÍI]TULO\\s+([IVXLCDM]+|\\d+)/i, \"?\");\n            const capituloTexto = baseText || `CAPÍTULO ${ordinal}`;\n            const anchor = ensureAnchor(cap?.anchor, capituloTexto, `capitulo-${ordinal}`);\n            return {\n                ordinal,\n                capitulo_texto: capituloTexto,\n                anchor,\n                pages: toPagesArray(cap?.pages),\n                secciones: sanitizeSecciones(cap?.secciones),\n                articulos: sanitizeArticulos(cap?.articulos)\n            };\n        });\n    };\n    const sanitizeTitulos = (titulos)=>{\n        if (!Array.isArray(titulos)) return [];\n        return titulos.filter((titulo)=>titulo && typeof titulo === \"object\").map((titulo)=>{\n            let data = titulo;\n            const keys = Object.keys(titulo);\n            if (keys.length === 1 && typeof titulo[keys[0]] === \"object\" && titulo[keys[0]]) {\n                const candidate = titulo[keys[0]];\n                if (typeof candidate === \"object\") {\n                    data = {\n                        ...candidate\n                    };\n                    if (!data.ordinal) data.ordinal = candidate.ordinal;\n                    if (!data.titulo_texto && typeof candidate.titulo === \"string\") data.titulo_texto = candidate.titulo;\n                    if (!data.anchor && typeof candidate.anchor === \"string\") data.anchor = candidate.anchor;\n                    if (!data.pages && candidate.pages) data.pages = candidate.pages;\n                    if (!data.capitulos && candidate.capitulos) data.capitulos = candidate.capitulos;\n                    if (!data.articulos && candidate.articulos) data.articulos = candidate.articulos;\n                }\n                if (!data.titulo_texto && keys[0]) {\n                    const textual = keys[0].replace(/^ti[-_]?tulo/i, \"T\\xedtulo \").replace(/^titulo/i, \"T\\xedtulo \").replace(/[_-]+/g, \" \").replace(/\\s+/g, \" \").trim();\n                    if (textual.length) data.titulo_texto = textual;\n                }\n            }\n            if (!data.titulo_texto && typeof data.titulo === \"string\") {\n                data.titulo_texto = data.titulo;\n            }\n            const titleKey = keys.find((k)=>k !== \"titulo_texto\" && k !== \"titulo\" && /ti.?tulo/i.test(k) && typeof data[k] === \"string\");\n            if (titleKey && !data.titulo_texto) {\n                data.titulo_texto = data[titleKey];\n            }\n            const baseText = typeof data?.titulo_texto === \"string\" && data.titulo_texto.trim().length ? data.titulo_texto.trim() : typeof data?.titulo === \"string\" && data.titulo.trim().length ? data.titulo.trim() : \"\";\n            const ordinal = deriveOrdinal(data?.ordinal, baseText, /T[ÍI]TULO\\s+(PRELIMINAR|[IVXLCDM]+|\\d+)/i, \"?\");\n            const tituloTexto = baseText || `TÍTULO ${ordinal}`;\n            const anchor = ensureAnchor(data?.anchor, tituloTexto, `titulo-${ordinal}`);\n            let capitulosRaw = Array.isArray(data?.capitulos) ? data.capitulos : Array.isArray(data?.cap) ? data.cap : [];\n            let articulosRaw = Array.isArray(data?.articulos) ? data.articulos : Array.isArray(data?.art) ? data.art : [];\n            if (Array.isArray(articulosRaw) && articulosRaw.every((item)=>typeof item !== \"object\")) {\n                articulosRaw = articulosRaw.map((item, idx)=>({\n                        numero: typeof item === \"number\" ? String(item) : typeof item === \"string\" ? item : String(idx + 1)\n                    }));\n            }\n            return {\n                ordinal,\n                titulo_texto: tituloTexto,\n                anchor,\n                pages: toPagesArray(data?.pages || data?.rango),\n                capitulos: sanitizeCapitulos(capitulosRaw),\n                articulos: sanitizeArticulos(articulosRaw)\n            };\n        });\n    };\n    const sanitizeDisposiciones = (items)=>{\n        if (!Array.isArray(items)) return [];\n        return items.filter((dis)=>dis && typeof dis === \"object\").map((dis)=>{\n            const numero = (()=>{\n                if (typeof dis?.numero === \"string\" && dis.numero.trim().length) return dis.numero.trim();\n                if (typeof dis?.numero === \"number\") return String(dis.numero);\n                if (typeof dis?.titulo === \"string\") {\n                    const match = dis.titulo.match(/(PRE[ÍI]MBULO|[A-ZÁÉÍÓÚ]+|\\d+)/i);\n                    if (match) return match[1].toUpperCase();\n                }\n                return \"?\";\n            })();\n            const texto = sanitizeArticleText(dis?.texto_encabezado || dis?.titulo || `Disposición ${numero}`);\n            const anchor = ensureAnchor(dis?.anchor, texto || numero, `disposicion-${numero}`);\n            return {\n                numero,\n                texto_encabezado: texto || `Disposición ${numero}`,\n                anchor,\n                pages: toPagesArray(dis?.pages)\n            };\n        });\n    };\n    const dispositionBuckets = {\n        adicionales: [],\n        transitorias: [],\n        derogatorias: [],\n        finales: []\n    };\n    const pushDisposItems = (entries, type)=>{\n        if (!Array.isArray(entries) || !type) return;\n        dispositionBuckets[type].push(...sanitizeDisposiciones(entries));\n    };\n    const classifyDisposProps = (raw)=>{\n        if (!raw || typeof raw !== \"object\") return;\n        for (const [key, value] of Object.entries(raw)){\n            const lower = key.toLowerCase();\n            if (lower.includes(\"adicional\")) {\n                pushDisposItems(value, \"adicionales\");\n            } else if (lower.includes(\"transitor\")) {\n                pushDisposItems(value, \"transitorias\");\n            } else if (lower.includes(\"derogator\")) {\n                pushDisposItems(value, \"derogatorias\");\n            } else if (lower.includes(\"final\")) {\n                pushDisposItems(value, \"finales\");\n            }\n        }\n    };\n    if (outline?.disposiciones) {\n        classifyDisposProps(outline.disposiciones);\n    }\n    const sanitizeMetadata = (metadata)=>{\n        const fallback = {\n            document_title: \"Documento legal\",\n            source: \"Documento legal\",\n            language: \"es\",\n            generated_at: new Date().toISOString().slice(0, 10)\n        };\n        if (!metadata || typeof metadata !== \"object\") return fallback;\n        const result = {\n            ...fallback\n        };\n        if (typeof metadata.document_title === \"string\" && metadata.document_title.trim()) result.document_title = metadata.document_title.trim();\n        if (typeof metadata.source === \"string\" && metadata.source.trim()) result.source = metadata.source.trim();\n        if (typeof metadata.language === \"string\" && metadata.language.trim()) result.language = metadata.language.trim();\n        if (typeof metadata.generated_at === \"string\" && metadata.generated_at.trim()) result.generated_at = metadata.generated_at.trim();\n        result.language = \"es\";\n        return result;\n    };\n    const normalizeFront = (entry, fallbackAnchor)=>{\n        const present = typeof entry === \"boolean\" ? entry : Boolean(entry?.present);\n        const anchorRaw = typeof entry?.anchor === \"string\" && entry.anchor.trim().length ? entry.anchor.trim() : \"\";\n        const anchor = present ? ensureAnchor(anchorRaw, fallbackAnchor, fallbackAnchor) : anchorRaw || null;\n        const pagesArray = Array.isArray(entry?.pages) ? toPagesArray(entry.pages).slice(0, 2) : [];\n        return {\n            present,\n            anchor,\n            pages: present && pagesArray.length ? pagesArray : null\n        };\n    };\n    const normalizedMetadata = sanitizeMetadata(outline.metadata);\n    const normalizedTitulos = sanitizeTitulos(outline.titulos);\n    const sanitizedDisposiciones = {\n        adicionales: dispositionBuckets.adicionales,\n        transitorias: dispositionBuckets.transitorias,\n        derogatorias: dispositionBuckets.derogatorias,\n        finales: dispositionBuckets.finales\n    };\n    const frontRaw = outline?.front_matter && typeof outline.front_matter === \"object\" ? outline.front_matter : {};\n    const sanitizedFront = {\n        preambulo: normalizeFront(frontRaw.preambulo ?? frontRaw.preambulo_present ?? frontRaw.preambulo_bool ?? frontRaw.preambulo_flag ?? frontRaw.preambulo_value ?? false, \"preambulo\"),\n        exposicion_motivos: normalizeFront(frontRaw.exposicion_motivos ?? frontRaw.exposicion ?? frontRaw.exposicion_de_motivos ?? frontRaw.exposicion_bool ?? frontRaw.exposicion_flag ?? frontRaw.exposicion_value ?? false, \"exposicion-motivos\")\n    };\n    return {\n        metadata: normalizedMetadata,\n        front_matter: sanitizedFront,\n        titulos: normalizedTitulos,\n        disposiciones: sanitizedDisposiciones\n    };\n}\nasync function POST(req) {\n    try {\n        const payload = await req.json();\n        const source = typeof payload?.source === \"string\" ? payload.source : \"\";\n        const lawName = typeof payload?.lawName === \"string\" ? payload.lawName : \"\";\n        const schema = payload?.schema ?? null;\n        const metadataPayload = payload?.metadata ?? {};\n        const pagesChunk = Array.isArray(payload?.pagesChunk) ? payload.pagesChunk : [];\n        if (!pagesChunk.length) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                ok: false,\n                error: \"pagesChunk requerido\"\n            }, {\n                status: 400\n            });\n        }\n        const normalizedPages = pagesChunk.map((entry, idx)=>({\n                num: typeof entry?.num === \"number\" ? entry.num : idx + 1,\n                text: typeof entry?.text === \"string\" ? entry.text : \"\"\n            }));\n        const hasContent = normalizedPages.some((entry)=>entry.text.trim().length > 0);\n        if (!hasContent) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                ok: false,\n                error: \"Sin texto utilizable en pagesChunk\"\n            }, {\n                status: 400\n            });\n        }\n        const firstPage = normalizedPages[0].num;\n        const lastPage = normalizedPages[normalizedPages.length - 1].num;\n        const { text } = (0,_lib_pdf_pagesMap__WEBPACK_IMPORTED_MODULE_4__.buildTextFromPages)(normalizedPages);\n        const metadata = {\n            document_title: typeof metadataPayload?.document_title === \"string\" && metadataPayload.document_title.trim().length ? metadataPayload.document_title : lawName || source || \"Documento legal\",\n            source: typeof metadataPayload?.source === \"string\" && metadataPayload.source.trim().length ? metadataPayload.source : source || lawName || \"Documento legal\",\n            language: typeof metadataPayload?.language === \"string\" && metadataPayload.language.trim().length ? metadataPayload.language : \"es\",\n            generated_at: typeof metadataPayload?.generated_at === \"string\" && metadataPayload.generated_at.trim().length ? metadataPayload.generated_at : new Date().toISOString().slice(0, 10)\n        };\n        const prompt = (0,_lib_qa_promptsMentalOutline__WEBPACK_IMPORTED_MODULE_1__.buildMentalOutlineChunkPrompt)({\n            source: source || lawName,\n            schemaAcumulado: schema,\n            loteTexto: text,\n            rangoPaginas: [\n                firstPage,\n                lastPage\n            ],\n            metadata\n        });\n        (0,_lib_logging_logger__WEBPACK_IMPORTED_MODULE_3__.logEvent)(\"mentalOutline.chunk.prompt\", {\n            source: source || lawName,\n            from: firstPage,\n            to: lastPage,\n            size: text.length\n        });\n        const outline = await (0,_lib_qa_callModel__WEBPACK_IMPORTED_MODULE_2__.callModelJSON)(prompt, 60000, 4000, {\n            endpoint: \"mental-outline-chunk\",\n            source: source || lawName,\n            range: [\n                firstPage,\n                lastPage\n            ],\n            pages: normalizedPages.length\n        });\n        const schemaAcumuladoRaw = outline?.schema_acumulado ?? outline;\n        (0,_lib_logging_logger__WEBPACK_IMPORTED_MODULE_3__.logEvent)(\"mentalOutline.chunk.response\", {\n            source: source || lawName,\n            from: firstPage,\n            to: lastPage,\n            titulos: Array.isArray(schemaAcumuladoRaw?.titulos) ? schemaAcumuladoRaw.titulos.length : undefined\n        });\n        if (!schemaAcumuladoRaw || typeof schemaAcumuladoRaw !== \"object\") {\n            throw new Error(\"Respuesta sin esquema v\\xe1lido\");\n        }\n        const schemaAcumuladoRawObj = {\n            metadata: schemaAcumuladoRaw.metadata,\n            front_matter: schemaAcumuladoRaw.front_matter,\n            titulos: schemaAcumuladoRaw.titulos,\n            disposiciones: schemaAcumuladoRaw.disposiciones\n        };\n        const schemaAcumulado = sanitizeOutline(schemaAcumuladoRawObj);\n        const valid = validateMentalOutline(schemaAcumulado);\n        if (!valid) {\n            const details = (validateMentalOutline.errors || []).map((err)=>`${err.instancePath || \"/\"} ${err.message}`).join(\"; \");\n            throw new Error(`Respuesta inválida (schema): ${details}`);\n        }\n        // corrige front matter para mapear a páginas reales si es necesario\n        if (schemaAcumulado.front_matter) {\n            const mapPage = (pages)=>{\n                if (!pages || pages.length === 0) return null;\n                const mapped = pages.map((p)=>normalizedPages[0].num + (p - pages[0])).filter((p)=>Number.isInteger(p));\n                return mapped.length ? mapped : pages;\n            };\n            schemaAcumulado.front_matter.preambulo.pages = mapPage(schemaAcumulado.front_matter.preambulo.pages);\n            if (schemaAcumulado.front_matter.exposicion_motivos) {\n                schemaAcumulado.front_matter.exposicion_motivos.pages = mapPage(schemaAcumulado.front_matter.exposicion_motivos.pages);\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            ok: true,\n            outline: schemaAcumulado\n        });\n    } catch (error) {\n        const message = typeof error?.message === \"string\" ? error.message : \"Error generando esquema por lotes\";\n        (0,_lib_logging_logger__WEBPACK_IMPORTED_MODULE_3__.logEvent)(\"mentalOutline.chunk.error\", {\n            error: message\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            ok: false,\n            error: message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL21lbnRhbC1vdXRsaW5lL2NodW5rL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUF1RDtBQUNzQjtBQUMzQjtBQUNIO0FBQ21CO0FBQ0Y7QUFFN0I7QUFDQztBQUU3QixNQUFNUSxVQUFVLFNBQVE7QUFFL0IsTUFBTUMsTUFBTSxJQUFJSCxzREFBT0EsQ0FBQztJQUFFSSxXQUFXO0FBQUs7QUFDMUNILGtEQUFVQSxDQUFDRTtBQUNYLE1BQU1FLHdCQUF3QkYsSUFBSUcsT0FBTyxDQUFDUCwwRUFBbUJBO0FBRTdELFNBQVNRLG9CQUFvQkMsSUFBWTtJQUN2QyxJQUFJLENBQUNBLE1BQU0sT0FBT0E7SUFDbEIsTUFBTUMsWUFBWUQsS0FBS0UsS0FBSyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUVDLFVBQVU7SUFDbEQsSUFBSUYsVUFBVUcsTUFBTSxJQUFJLEtBQUssT0FBT0g7SUFDcEMsT0FBTyxDQUFDLEVBQUVBLFVBQVVJLEtBQUssQ0FBQyxHQUFHLEtBQUtDLE9BQU8sR0FBRyxDQUFDLENBQUM7QUFDaEQ7QUFFQSxTQUFTQyxnQkFBZ0JDLE9BQVk7SUFDbkMsSUFBSSxDQUFDQSxXQUFXLE9BQU9BLFlBQVksVUFBVSxPQUFPQTtJQUVwRCxNQUFNQyxVQUFVLENBQUNDLE9BQWdCQztRQUMvQixNQUFNQyxRQUFRLE9BQU9GLFVBQVUsV0FBV0EsUUFBUTtRQUNsRCxNQUFNRyxPQUFPRCxNQUNWRSxXQUFXLEdBQ1hDLFNBQVMsQ0FBQyxPQUNWQyxPQUFPLENBQUMsOEJBQThCLEtBQ3RDQSxPQUFPLENBQUMsWUFBWSxJQUNwQkEsT0FBTyxDQUFDLE9BQU87UUFDbEIsT0FBT0gsUUFBUUY7SUFDakI7SUFFQSxNQUFNTSxlQUFlLENBQUNDO1FBQ3BCLElBQUksQ0FBQ0MsTUFBTUMsT0FBTyxDQUFDRixRQUFRLE9BQU8sRUFBRTtRQUNwQyxNQUFNRyxXQUFXSCxNQUNkSSxHQUFHLENBQUMsQ0FBQ0MsSUFBTyxPQUFPQSxN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QUFZLENBQUNFLFNBQVMsQ0FBQzlHLEtBQUssR0FBRzhKLFFBQVFuQixnQkFBZ0IvQixZQUFZLENBQUNFLFNBQVMsQ0FBQzlHLEtBQUs7WUFDbkcsSUFBSTJJLGdCQUFnQi9CLFlBQVksQ0FBQ08sa0JBQWtCLEVBQUU7Z0JBQ25Ed0IsZ0JBQWdCL0IsWUFBWSxDQUFDTyxrQkFBa0IsQ0FBQ25ILEtBQUssR0FBRzhKLFFBQVFuQixnQkFBZ0IvQixZQUFZLENBQUNPLGtCQUFrQixDQUFDbkgsS0FBSztZQUN2SDtRQUNGO1FBRUEsT0FBT2hDLHFEQUFZQSxDQUFDNEosSUFBSSxDQUFDO1lBQUVLLElBQUk7WUFBTTNJLFNBQVNxSjtRQUFnQjtJQUNoRSxFQUFFLE9BQU9ULE9BQVk7UUFDbkIsTUFBTTBCLFVBQVUsT0FBTzFCLE9BQU8wQixZQUFZLFdBQVcxQixNQUFNMEIsT0FBTyxHQUFHO1FBQ3JFekwsNkRBQVFBLENBQUMsNkJBQTZCO1lBQUUrSixPQUFPMEI7UUFBUTtRQUN2RCxPQUFPNUwscURBQVlBLENBQUM0SixJQUFJLENBQUM7WUFBRUssSUFBSTtZQUFPQyxPQUFPMEI7UUFBUSxHQUFHO1lBQUV6QixRQUFRO1FBQUk7SUFDeEU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3RmbS11b2MtaWEvLi9hcHAvYXBpL21lbnRhbC1vdXRsaW5lL2NodW5rL3JvdXRlLnRzPzZmZDAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xyXG5pbXBvcnQgeyBidWlsZE1lbnRhbE91dGxpbmVDaHVua1Byb21wdCB9IGZyb20gJ0AvbGliL3FhL3Byb21wdHNNZW50YWxPdXRsaW5lJ1xyXG5pbXBvcnQgeyBjYWxsTW9kZWxKU09OIH0gZnJvbSAnQC9saWIvcWEvY2FsbE1vZGVsJ1xyXG5pbXBvcnQgeyBsb2dFdmVudCB9IGZyb20gJ0AvbGliL2xvZ2dpbmcvbG9nZ2VyJ1xyXG5pbXBvcnQgeyBidWlsZFRleHRGcm9tUGFnZXMsIFBhZ2VFbnRyeSB9IGZyb20gJ0AvbGliL3BkZi9wYWdlc01hcCdcclxuaW1wb3J0IHsgbWVudGFsT3V0bGluZVNjaGVtYSB9IGZyb20gJ0AvbGliL3NjaGVtYS9tZW50YWxPdXRsaW5lJ1xyXG5pbXBvcnQgdHlwZSB7IERpc3Bvc2ljaW9uSXRlbSB9IGZyb20gJ0AvdHlwZXMvbWVudGFsT3V0bGluZSdcclxuaW1wb3J0IEFqdjIwMjAgZnJvbSAnYWp2L2Rpc3QvMjAyMCdcclxuaW1wb3J0IGFkZEZvcm1hdHMgZnJvbSAnYWp2LWZvcm1hdHMnXHJcblxyXG5leHBvcnQgY29uc3QgcnVudGltZSA9ICdub2RlanMnXHJcblxyXG5jb25zdCBhanYgPSBuZXcgQWp2MjAyMCh7IGFsbEVycm9yczogdHJ1ZSB9KVxyXG5hZGRGb3JtYXRzKGFqdilcclxuY29uc3QgdmFsaWRhdGVNZW50YWxPdXRsaW5lID0gYWp2LmNvbXBpbGUobWVudGFsT3V0bGluZVNjaGVtYSlcclxuXHJcbmZ1bmN0aW9uIHNhbml0aXplQXJ0aWNsZVRleHQodGV4dDogc3RyaW5nKSB7XHJcbiAgaWYgKCF0ZXh0KSByZXR1cm4gdGV4dFxyXG4gIGNvbnN0IGZpcnN0TGluZSA9IHRleHQuc3BsaXQoL1xcbisvKVswXT8udHJpbSgpIHx8ICcnXHJcbiAgaWYgKGZpcnN0TGluZS5sZW5ndGggPD0gMjIwKSByZXR1cm4gZmlyc3RMaW5lXHJcbiAgcmV0dXJuIGAke2ZpcnN0TGluZS5zbGljZSgwLCAyMTcpLnRyaW1FbmQoKX3igKZgXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNhbml0aXplT3V0bGluZShvdXRsaW5lOiBhbnkpIHtcclxuICBpZiAoIW91dGxpbmUgfHwgdHlwZW9mIG91dGxpbmUgIT09ICdvYmplY3QnKSByZXR1cm4gb3V0bGluZVxyXG5cclxuICBjb25zdCBzbHVnaWZ5ID0gKGlucHV0OiB1bmtub3duLCBmYWxsYmFjazogc3RyaW5nKSA9PiB7XHJcbiAgICBjb25zdCB2YWx1ZSA9IHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgPyBpbnB1dCA6ICcnXHJcbiAgICBjb25zdCBzbHVnID0gdmFsdWVcclxuICAgICAgLnRvTG93ZXJDYXNlKClcclxuICAgICAgLm5vcm1hbGl6ZSgnTkZEJylcclxuICAgICAgLnJlcGxhY2UoL1teXFxwe0xldHRlcn1cXHB7TnVtYmVyfV0rL2d1LCAnLScpXHJcbiAgICAgIC5yZXBsYWNlKC9eLSt8LSskL2csICcnKVxyXG4gICAgICAucmVwbGFjZSgvLSsvZywgJy0nKVxyXG4gICAgcmV0dXJuIHNsdWcgfHwgZmFsbGJhY2tcclxuICB9XHJcblxyXG4gIGNvbnN0IHRvUGFnZXNBcnJheSA9IChwYWdlczogYW55KTogbnVtYmVyW10gPT4ge1xyXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHBhZ2VzKSkgcmV0dXJuIFtdXHJcbiAgICBjb25zdCBmaWx0ZXJlZCA9IHBhZ2VzXHJcbiAgICAgIC5tYXAoKG4pID0+ICh0eXBlb2YgbiA9PT0gJ251bWJlcicgPyBNYXRoLnRydW5jKG4pIDogTnVtYmVyKG4pKSlcclxuICAgICAgLmZpbHRlcigobikgPT4gTnVtYmVyLmlzSW50ZWdlcihuKSAmJiBuID4gMClcclxuICAgIHJldHVybiBBcnJheS5mcm9tKG5ldyBTZXQoZmlsdGVyZWQpKS5zb3J0KChhLCBiKSA9PiBhIC0gYilcclxuICB9XHJcblxyXG4gIGNvbnN0IGVuc3VyZUFuY2hvciA9ICh2YWx1ZTogdW5rbm93biwgc2VlZDogc3RyaW5nLCBmYWxsYmFja1ByZWZpeDogc3RyaW5nKSA9PiB7XHJcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJiB2YWx1ZS50cmltKCkubGVuZ3RoKSByZXR1cm4gdmFsdWUudHJpbSgpXHJcbiAgICByZXR1cm4gc2x1Z2lmeShzZWVkLCBmYWxsYmFja1ByZWZpeClcclxuICB9XHJcblxyXG4gIGNvbnN0IGRlcml2ZU9yZGluYWwgPSAocmF3OiB1bmtub3duLCB0ZXh0OiBzdHJpbmcsIHJlZ2V4OiBSZWdFeHAsIGZhbGxiYWNrOiBzdHJpbmcpID0+IHtcclxuICAgIGlmICh0eXBlb2YgcmF3ID09PSAnc3RyaW5nJyAmJiByYXcudHJpbSgpLmxlbmd0aCkgcmV0dXJuIHJhdy50cmltKClcclxuICAgIGNvbnN0IG1hdGNoID0gdGV4dC5tYXRjaChyZWdleClcclxuICAgIGlmIChtYXRjaCAmJiBtYXRjaFsxXSkgcmV0dXJuIG1hdGNoWzFdLnRvVXBwZXJDYXNlKClcclxuICAgIHJldHVybiBmYWxsYmFja1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgc2FuaXRpemVBcnRpY3Vsb3MgPSAoYXJ0aWN1bG9zPzogYW55W10pID0+IHtcclxuICAgIGlmICghQXJyYXkuaXNBcnJheShhcnRpY3Vsb3MpKSByZXR1cm4gW11cclxuICAgIHJldHVybiBhcnRpY3Vsb3NcclxuICAgICAgLmZpbHRlcigoYXJ0KSA9PiBhcnQgJiYgdHlwZW9mIGFydCA9PT0gJ29iamVjdCcpXHJcbiAgICAgIC5tYXAoKGFydCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG51bWVybyA9ICgoKSA9PiB7XHJcbiAgICAgICAgICBpZiAodHlwZW9mIGFydD8ubnVtZXJvID09PSAnc3RyaW5nJyAmJiBhcnQubnVtZXJvLnRyaW0oKS5sZW5ndGgpIHJldHVybiBhcnQubnVtZXJvLnRyaW0oKVxyXG4gICAgICAgICAgaWYgKHR5cGVvZiBhcnQ/LmFydGljdWxvX251bSA9PT0gJ251bWJlcicpIHJldHVybiBTdHJpbmcoYXJ0LmFydGljdWxvX251bSlcclxuICAgICAgICAgIGlmICh0eXBlb2YgYXJ0Py5hcnRpY3Vsb19udW0gPT09ICdzdHJpbmcnICYmIGFydC5hcnRpY3Vsb19udW0udHJpbSgpLmxlbmd0aCkgcmV0dXJuIGFydC5hcnRpY3Vsb19udW0udHJpbSgpXHJcbiAgICAgICAgICBpZiAodHlwZW9mIGFydD8uYXJ0aWN1bG8gPT09ICdzdHJpbmcnICYmIGFydC5hcnRpY3Vsby50cmltKCkubGVuZ3RoKSByZXR1cm4gYXJ0LmFydGljdWxvLnRyaW0oKVxyXG4gICAgICAgICAgaWYgKHR5cGVvZiBhcnQ/LmFydGljdWxvX251bWVybyA9PT0gJ3N0cmluZycgJiYgYXJ0LmFydGljdWxvX251bWVyby50cmltKCkubGVuZ3RoKSByZXR1cm4gYXJ0LmFydGljdWxvX251bWVyby50cmltKClcclxuICAgICAgICAgIHJldHVybiAnPydcclxuICAgICAgICB9KSgpXHJcbiAgICAgICAgY29uc3QgdGV4dG8gPSBzYW5pdGl6ZUFydGljbGVUZXh0KFxyXG4gICAgICAgICAgYXJ0Py5hcnRpY3Vsb190ZXh0byB8fFxyXG4gICAgICAgICAgYXJ0Py50ZXh0b19lbmNhYmV6YWRvIHx8XHJcbiAgICAgICAgICAodHlwZW9mIGFydD8udGl0dWxvID09PSAnc3RyaW5nJyA/IGFydC50aXR1bG8gOiAnJykgfHxcclxuICAgICAgICAgIGBBcnTDrWN1bG8gJHtudW1lcm99YCxcclxuICAgICAgICApXHJcbiAgICAgICAgY29uc3QgYW5jaG9yID0gZW5zdXJlQW5jaG9yKGFydD8uYW5jaG9yLCBgJHt0ZXh0byB8fCBudW1lcm99YCwgYGFydGljdWxvLSR7bnVtZXJvfWApXHJcbiAgICAgICAgY29uc3QgcGFnZVNvdXJjZSA9IGFydD8ucGFnZXMgPz8gYXJ0Py5yYW5nb19wYWdpbmFzID8/IGFydD8ucmFuZ28gPz8gYXJ0Py5wYWdlID8/IG51bGxcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgbnVtZXJvLFxyXG4gICAgICAgICAgYXJ0aWN1bG9fdGV4dG86IHRleHRvIHx8IGBBcnTDrWN1bG8gJHtudW1lcm99YCxcclxuICAgICAgICAgIGFuY2hvcixcclxuICAgICAgICAgIHBhZ2VzOiB0b1BhZ2VzQXJyYXkocGFnZVNvdXJjZSksXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gIH1cclxuXHJcbiAgY29uc3Qgc2FuaXRpemVTZWNjaW9uZXMgPSAoc2VjY2lvbmVzPzogYW55W10pID0+IHtcclxuICAgIGlmICghQXJyYXkuaXNBcnJheShzZWNjaW9uZXMpKSByZXR1cm4gW11cclxuICAgIHJldHVybiBzZWNjaW9uZXNcclxuICAgICAgLmZpbHRlcigoc2VjKSA9PiBzZWMgJiYgdHlwZW9mIHNlYyA9PT0gJ29iamVjdCcpXHJcbiAgICAgIC5tYXAoKHNlYykgPT4ge1xyXG4gICAgICAgIGNvbnN0IGJhc2VUZXh0ID0gdHlwZW9mIHNlYz8uc2VjY2lvbl90ZXh0byA9PT0gJ3N0cmluZycgJiYgc2VjLnNlY2Npb25fdGV4dG8udHJpbSgpLmxlbmd0aFxyXG4gICAgICAgICAgPyBzZWMuc2VjY2lvbl90ZXh0by50cmltKClcclxuICAgICAgICAgIDogdHlwZW9mIHNlYz8udGl0dWxvID09PSAnc3RyaW5nJyAmJiBzZWMudGl0dWxvLnRyaW0oKS5sZW5ndGhcclxuICAgICAgICAgICAgPyBzZWMudGl0dWxvLnRyaW0oKVxyXG4gICAgICAgICAgICA6ICcnXHJcbiAgICAgICAgY29uc3Qgb3JkaW5hbCA9IGRlcml2ZU9yZGluYWwoc2VjPy5vcmRpbmFsLCBiYXNlVGV4dCwgL1NFQ0NJW8OTT11OXFxzKyhbSVZYTENETV0rfFxcZCspL2ksICc/JylcclxuICAgICAgICBjb25zdCBzZWNjaW9uVGV4dG8gPSBiYXNlVGV4dCB8fCBgU0VDQ0nDk04gJHtvcmRpbmFsfWBcclxuICAgICAgICBjb25zdCBhbmNob3IgPSBlbnN1cmVBbmNob3Ioc2VjPy5hbmNob3IsIHNlY2Npb25UZXh0bywgYHNlY2Npb24tJHtvcmRpbmFsfWApXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIG9yZGluYWwsXHJcbiAgICAgICAgICBzZWNjaW9uX3RleHRvOiBzZWNjaW9uVGV4dG8sXHJcbiAgICAgICAgICBhbmNob3IsXHJcbiAgICAgICAgICBwYWdlczogdG9QYWdlc0FycmF5KHNlYz8ucGFnZXMpLFxyXG4gICAgICAgICAgYXJ0aWN1bG9zOiBzYW5pdGl6ZUFydGljdWxvcyhzZWM/LmFydGljdWxvcyksXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gIH1cclxuXHJcbiAgY29uc3Qgc2FuaXRpemVDYXBpdHVsb3MgPSAoY2FwaXR1bG9zPzogYW55W10pID0+IHtcclxuICAgIGlmICghQXJyYXkuaXNBcnJheShjYXBpdHVsb3MpKSByZXR1cm4gW11cclxuICAgIHJldHVybiBjYXBpdHVsb3NcclxuICAgICAgLmZpbHRlcigoY2FwKSA9PiBjYXAgJiYgdHlwZW9mIGNhcCA9PT0gJ29iamVjdCcpXHJcbiAgICAgIC5tYXAoKGNhcCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGJhc2VUZXh0ID0gdHlwZW9mIGNhcD8uY2FwaXR1bG9fdGV4dG8gPT09ICdzdHJpbmcnICYmIGNhcC5jYXBpdHVsb190ZXh0by50cmltKCkubGVuZ3RoXHJcbiAgICAgICAgICA/IGNhcC5jYXBpdHVsb190ZXh0by50cmltKClcclxuICAgICAgICAgIDogdHlwZW9mIGNhcD8udGl0dWxvID09PSAnc3RyaW5nJyAmJiBjYXAudGl0dWxvLnRyaW0oKS5sZW5ndGhcclxuICAgICAgICAgICAgPyBjYXAudGl0dWxvLnRyaW0oKVxyXG4gICAgICAgICAgICA6ICcnXHJcbiAgICAgICAgY29uc3Qgb3JkaW5hbCA9IGRlcml2ZU9yZGluYWwoY2FwPy5vcmRpbmFsLCBiYXNlVGV4dCwgL0NBUFvDjUldVFVMT1xccysoW0lWWExDRE1dK3xcXGQrKS9pLCAnPycpXHJcbiAgICAgICAgY29uc3QgY2FwaXR1bG9UZXh0byA9IGJhc2VUZXh0IHx8IGBDQVDDjVRVTE8gJHtvcmRpbmFsfWBcclxuICAgICAgICBjb25zdCBhbmNob3IgPSBlbnN1cmVBbmNob3IoY2FwPy5hbmNob3IsIGNhcGl0dWxvVGV4dG8sIGBjYXBpdHVsby0ke29yZGluYWx9YClcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgb3JkaW5hbCxcclxuICAgICAgICAgIGNhcGl0dWxvX3RleHRvOiBjYXBpdHVsb1RleHRvLFxyXG4gICAgICAgICAgYW5jaG9yLFxyXG4gICAgICAgICAgcGFnZXM6IHRvUGFnZXNBcnJheShjYXA/LnBhZ2VzKSxcclxuICAgICAgICAgIHNlY2Npb25lczogc2FuaXRpemVTZWNjaW9uZXMoY2FwPy5zZWNjaW9uZXMpLFxyXG4gICAgICAgICAgYXJ0aWN1bG9zOiBzYW5pdGl6ZUFydGljdWxvcyhjYXA/LmFydGljdWxvcyksXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gIH1cclxuXHJcbiAgY29uc3Qgc2FuaXRpemVUaXR1bG9zID0gKHRpdHVsb3M/OiBhbnlbXSkgPT4ge1xyXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHRpdHVsb3MpKSByZXR1cm4gW11cclxuICAgIHJldHVybiB0aXR1bG9zXHJcbiAgICAgIC5maWx0ZXIoKHRpdHVsbykgPT4gdGl0dWxvICYmIHR5cGVvZiB0aXR1bG8gPT09ICdvYmplY3QnKVxyXG4gICAgICAubWFwKCh0aXR1bG8pID0+IHtcclxuICAgICAgICBsZXQgZGF0YSA9IHRpdHVsb1xyXG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh0aXR1bG8pXHJcblxyXG4gICAgICAgIGlmIChrZXlzLmxlbmd0aCA9PT0gMSAmJiB0eXBlb2YgdGl0dWxvW2tleXNbMF1dID09PSAnb2JqZWN0JyAmJiB0aXR1bG9ba2V5c1swXV0pIHtcclxuICAgICAgICAgIGNvbnN0IGNhbmRpZGF0ZSA9IHRpdHVsb1trZXlzWzBdXVxyXG4gICAgICAgICAgaWYgKHR5cGVvZiBjYW5kaWRhdGUgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIGRhdGEgPSB7IC4uLmNhbmRpZGF0ZSB9XHJcbiAgICAgICAgICAgIGlmICghZGF0YS5vcmRpbmFsKSBkYXRhLm9yZGluYWwgPSBjYW5kaWRhdGUub3JkaW5hbFxyXG4gICAgICAgICAgICBpZiAoIWRhdGEudGl0dWxvX3RleHRvICYmIHR5cGVvZiBjYW5kaWRhdGUudGl0dWxvID09PSAnc3RyaW5nJykgZGF0YS50aXR1bG9fdGV4dG8gPSBjYW5kaWRhdGUudGl0dWxvXHJcbiAgICAgICAgICAgIGlmICghZGF0YS5hbmNob3IgJiYgdHlwZW9mIGNhbmRpZGF0ZS5hbmNob3IgPT09ICdzdHJpbmcnKSBkYXRhLmFuY2hvciA9IGNhbmRpZGF0ZS5hbmNob3JcclxuICAgICAgICAgICAgaWYgKCFkYXRhLnBhZ2VzICYmIGNhbmRpZGF0ZS5wYWdlcykgZGF0YS5wYWdlcyA9IGNhbmRpZGF0ZS5wYWdlc1xyXG4gICAgICAgICAgICBpZiAoIWRhdGEuY2FwaXR1bG9zICYmIGNhbmRpZGF0ZS5jYXBpdHVsb3MpIGRhdGEuY2FwaXR1bG9zID0gY2FuZGlkYXRlLmNhcGl0dWxvc1xyXG4gICAgICAgICAgICBpZiAoIWRhdGEuYXJ0aWN1bG9zICYmIGNhbmRpZGF0ZS5hcnRpY3Vsb3MpIGRhdGEuYXJ0aWN1bG9zID0gY2FuZGlkYXRlLmFydGljdWxvc1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmICghZGF0YS50aXR1bG9fdGV4dG8gJiYga2V5c1swXSkge1xyXG4gICAgICAgICAgICBjb25zdCB0ZXh0dWFsID0ga2V5c1swXVxyXG4gICAgICAgICAgICAgIC5yZXBsYWNlKC9edGlbLV9dP3R1bG8vaSwgJ1TDrXR1bG8gJylcclxuICAgICAgICAgICAgICAucmVwbGFjZSgvXnRpdHVsby9pLCAnVMOtdHVsbyAnKVxyXG4gICAgICAgICAgICAgIC5yZXBsYWNlKC9bXy1dKy9nLCAnICcpXHJcbiAgICAgICAgICAgICAgLnJlcGxhY2UoL1xccysvZywgJyAnKVxyXG4gICAgICAgICAgICAgIC50cmltKClcclxuICAgICAgICAgICAgaWYgKHRleHR1YWwubGVuZ3RoKSBkYXRhLnRpdHVsb190ZXh0byA9IHRleHR1YWxcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghZGF0YS50aXR1bG9fdGV4dG8gJiYgdHlwZW9mIGRhdGEudGl0dWxvID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgZGF0YS50aXR1bG9fdGV4dG8gPSBkYXRhLnRpdHVsb1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdGl0bGVLZXkgPSBrZXlzLmZpbmQoKGspID0+IGsgIT09ICd0aXR1bG9fdGV4dG8nICYmIGsgIT09ICd0aXR1bG8nICYmIC90aS4/dHVsby9pLnRlc3QoaykgJiYgdHlwZW9mIChkYXRhIGFzIGFueSlba10gPT09ICdzdHJpbmcnKVxyXG4gICAgICAgIGlmICh0aXRsZUtleSAmJiAhZGF0YS50aXR1bG9fdGV4dG8pIHtcclxuICAgICAgICAgIGRhdGEudGl0dWxvX3RleHRvID0gKGRhdGEgYXMgYW55KVt0aXRsZUtleV1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGJhc2VUZXh0ID0gdHlwZW9mIGRhdGE/LnRpdHVsb190ZXh0byA9PT0gJ3N0cmluZycgJiYgZGF0YS50aXR1bG9fdGV4dG8udHJpbSgpLmxlbmd0aFxyXG4gICAgICAgICAgPyBkYXRhLnRpdHVsb190ZXh0by50cmltKClcclxuICAgICAgICAgIDogdHlwZW9mIGRhdGE/LnRpdHVsbyA9PT0gJ3N0cmluZycgJiYgZGF0YS50aXR1bG8udHJpbSgpLmxlbmd0aFxyXG4gICAgICAgICAgICA/IGRhdGEudGl0dWxvLnRyaW0oKVxyXG4gICAgICAgICAgICA6ICcnXHJcbiAgICAgICAgY29uc3Qgb3JkaW5hbCA9IGRlcml2ZU9yZGluYWwoZGF0YT8ub3JkaW5hbCwgYmFzZVRleHQsIC9UW8ONSV1UVUxPXFxzKyhQUkVMSU1JTkFSfFtJVlhMQ0RNXSt8XFxkKykvaSwgJz8nKVxyXG4gICAgICAgIGNvbnN0IHRpdHVsb1RleHRvID0gYmFzZVRleHQgfHwgYFTDjVRVTE8gJHtvcmRpbmFsfWBcclxuICAgICAgICBjb25zdCBhbmNob3IgPSBlbnN1cmVBbmNob3IoZGF0YT8uYW5jaG9yLCB0aXR1bG9UZXh0bywgYHRpdHVsby0ke29yZGluYWx9YClcclxuICAgICAgICBsZXQgY2FwaXR1bG9zUmF3ID0gQXJyYXkuaXNBcnJheShkYXRhPy5jYXBpdHVsb3MpID8gZGF0YS5jYXBpdHVsb3MgOiBBcnJheS5pc0FycmF5KGRhdGE/LmNhcCkgPyBkYXRhLmNhcCA6IFtdXHJcbiAgICAgICAgbGV0IGFydGljdWxvc1JhdyA9IEFycmF5LmlzQXJyYXkoZGF0YT8uYXJ0aWN1bG9zKSA/IGRhdGEuYXJ0aWN1bG9zIDogQXJyYXkuaXNBcnJheShkYXRhPy5hcnQpID8gZGF0YS5hcnQgOiBbXVxyXG5cclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcnRpY3Vsb3NSYXcpICYmIGFydGljdWxvc1Jhdy5ldmVyeSgoaXRlbSkgPT4gdHlwZW9mIGl0ZW0gIT09ICdvYmplY3QnKSkge1xyXG4gICAgICAgICAgYXJ0aWN1bG9zUmF3ID0gYXJ0aWN1bG9zUmF3Lm1hcCgoaXRlbSwgaWR4KSA9PiAoe1xyXG4gICAgICAgICAgICBudW1lcm86IHR5cGVvZiBpdGVtID09PSAnbnVtYmVyJyA/IFN0cmluZyhpdGVtKSA6ICh0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZycgPyBpdGVtIDogU3RyaW5nKGlkeCArIDEpKSxcclxuICAgICAgICAgIH0pKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIG9yZGluYWwsXHJcbiAgICAgICAgICB0aXR1bG9fdGV4dG86IHRpdHVsb1RleHRvLFxyXG4gICAgICAgICAgYW5jaG9yLFxyXG4gICAgICAgICAgcGFnZXM6IHRvUGFnZXNBcnJheShkYXRhPy5wYWdlcyB8fCBkYXRhPy5yYW5nbyksXHJcbiAgICAgICAgICBjYXBpdHVsb3M6IHNhbml0aXplQ2FwaXR1bG9zKGNhcGl0dWxvc1JhdyksXHJcbiAgICAgICAgICBhcnRpY3Vsb3M6IHNhbml0aXplQXJ0aWN1bG9zKGFydGljdWxvc1JhdyksXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gIH1cclxuXHJcbiAgY29uc3Qgc2FuaXRpemVEaXNwb3NpY2lvbmVzID0gKGl0ZW1zPzogYW55W10pID0+IHtcclxuICAgIGlmICghQXJyYXkuaXNBcnJheShpdGVtcykpIHJldHVybiBbXVxyXG4gICAgcmV0dXJuIGl0ZW1zXHJcbiAgICAgIC5maWx0ZXIoKGRpcykgPT4gZGlzICYmIHR5cGVvZiBkaXMgPT09ICdvYmplY3QnKVxyXG4gICAgICAubWFwKChkaXMpID0+IHtcclxuICAgICAgICBjb25zdCBudW1lcm8gPSAoKCkgPT4ge1xyXG4gICAgICAgICAgaWYgKHR5cGVvZiBkaXM/Lm51bWVybyA9PT0gJ3N0cmluZycgJiYgZGlzLm51bWVyby50cmltKCkubGVuZ3RoKSByZXR1cm4gZGlzLm51bWVyby50cmltKClcclxuICAgICAgICAgIGlmICh0eXBlb2YgZGlzPy5udW1lcm8gPT09ICdudW1iZXInKSByZXR1cm4gU3RyaW5nKGRpcy5udW1lcm8pXHJcbiAgICAgICAgICBpZiAodHlwZW9mIGRpcz8udGl0dWxvID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IGRpcy50aXR1bG8ubWF0Y2goLyhQUkVbw41JXU1CVUxPfFtBLVrDgcOJw43Dk8OaXSt8XFxkKykvaSlcclxuICAgICAgICAgICAgaWYgKG1hdGNoKSByZXR1cm4gbWF0Y2hbMV0udG9VcHBlckNhc2UoKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuICc/J1xyXG4gICAgICAgIH0pKClcclxuICAgICAgICBjb25zdCB0ZXh0byA9IHNhbml0aXplQXJ0aWNsZVRleHQoZGlzPy50ZXh0b19lbmNhYmV6YWRvIHx8IGRpcz8udGl0dWxvIHx8IGBEaXNwb3NpY2nDs24gJHtudW1lcm99YClcclxuICAgICAgICBjb25zdCBhbmNob3IgPSBlbnN1cmVBbmNob3IoZGlzPy5hbmNob3IsIHRleHRvIHx8IG51bWVybywgYGRpc3Bvc2ljaW9uLSR7bnVtZXJvfWApXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIG51bWVybyxcclxuICAgICAgICAgIHRleHRvX2VuY2FiZXphZG86IHRleHRvIHx8IGBEaXNwb3NpY2nDs24gJHtudW1lcm99YCxcclxuICAgICAgICAgIGFuY2hvcixcclxuICAgICAgICAgIHBhZ2VzOiB0b1BhZ2VzQXJyYXkoZGlzPy5wYWdlcyksXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gIH1cclxuXHJcbiAgY29uc3QgZGlzcG9zaXRpb25CdWNrZXRzID0ge1xyXG4gICAgYWRpY2lvbmFsZXM6IFtdIGFzIERpc3Bvc2ljaW9uSXRlbVtdLFxyXG4gICAgdHJhbnNpdG9yaWFzOiBbXSBhcyBEaXNwb3NpY2lvbkl0ZW1bXSxcclxuICAgIGRlcm9nYXRvcmlhczogW10gYXMgRGlzcG9zaWNpb25JdGVtW10sXHJcbiAgICBmaW5hbGVzOiBbXSBhcyBEaXNwb3NpY2lvbkl0ZW1bXSxcclxuICB9XHJcblxyXG4gIGNvbnN0IHB1c2hEaXNwb3NJdGVtcyA9IChlbnRyaWVzPzogYW55W10sIHR5cGU/OiBrZXlvZiB0eXBlb2YgZGlzcG9zaXRpb25CdWNrZXRzKSA9PiB7XHJcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZW50cmllcykgfHwgIXR5cGUpIHJldHVyblxyXG4gICAgZGlzcG9zaXRpb25CdWNrZXRzW3R5cGVdLnB1c2goLi4uc2FuaXRpemVEaXNwb3NpY2lvbmVzKGVudHJpZXMpIGFzIERpc3Bvc2ljaW9uSXRlbVtdKVxyXG4gIH1cclxuXHJcbiAgY29uc3QgY2xhc3NpZnlEaXNwb3NQcm9wcyA9IChyYXc6IGFueSkgPT4ge1xyXG4gICAgaWYgKCFyYXcgfHwgdHlwZW9mIHJhdyAhPT0gJ29iamVjdCcpIHJldHVyblxyXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocmF3KSkge1xyXG4gICAgICBjb25zdCBsb3dlciA9IGtleS50b0xvd2VyQ2FzZSgpXHJcbiAgICAgIGlmIChsb3dlci5pbmNsdWRlcygnYWRpY2lvbmFsJykpIHtcclxuICAgICAgICBwdXNoRGlzcG9zSXRlbXModmFsdWUgYXMgYW55W10sICdhZGljaW9uYWxlcycpXHJcbiAgICAgIH0gZWxzZSBpZiAobG93ZXIuaW5jbHVkZXMoJ3RyYW5zaXRvcicpKSB7XHJcbiAgICAgICAgcHVzaERpc3Bvc0l0ZW1zKHZhbHVlIGFzIGFueVtdLCAndHJhbnNpdG9yaWFzJylcclxuICAgICAgfSBlbHNlIGlmIChsb3dlci5pbmNsdWRlcygnZGVyb2dhdG9yJykpIHtcclxuICAgICAgICBwdXNoRGlzcG9zSXRlbXModmFsdWUgYXMgYW55W10sICdkZXJvZ2F0b3JpYXMnKVxyXG4gICAgICB9IGVsc2UgaWYgKGxvd2VyLmluY2x1ZGVzKCdmaW5hbCcpKSB7XHJcbiAgICAgICAgcHVzaERpc3Bvc0l0ZW1zKHZhbHVlIGFzIGFueVtdLCAnZmluYWxlcycpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlmIChvdXRsaW5lPy5kaXNwb3NpY2lvbmVzKSB7XHJcbiAgICBjbGFzc2lmeURpc3Bvc1Byb3BzKG91dGxpbmUuZGlzcG9zaWNpb25lcylcclxuICB9XHJcblxyXG4gIGNvbnN0IHNhbml0aXplTWV0YWRhdGEgPSAobWV0YWRhdGE6IGFueSkgPT4ge1xyXG4gICAgY29uc3QgZmFsbGJhY2sgPSB7XHJcbiAgICAgIGRvY3VtZW50X3RpdGxlOiAnRG9jdW1lbnRvIGxlZ2FsJyxcclxuICAgICAgc291cmNlOiAnRG9jdW1lbnRvIGxlZ2FsJyxcclxuICAgICAgbGFuZ3VhZ2U6ICdlcycsXHJcbiAgICAgIGdlbmVyYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKSxcclxuICAgIH1cclxuICAgIGlmICghbWV0YWRhdGEgfHwgdHlwZW9mIG1ldGFkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGZhbGxiYWNrXHJcbiAgICBjb25zdCByZXN1bHQgPSB7IC4uLmZhbGxiYWNrIH1cclxuICAgIGlmICh0eXBlb2YgbWV0YWRhdGEuZG9jdW1lbnRfdGl0bGUgPT09ICdzdHJpbmcnICYmIG1ldGFkYXRhLmRvY3VtZW50X3RpdGxlLnRyaW0oKSkgcmVzdWx0LmRvY3VtZW50X3RpdGxlID0gbWV0YWRhdGEuZG9jdW1lbnRfdGl0bGUudHJpbSgpXHJcbiAgICBpZiAodHlwZW9mIG1ldGFkYXRhLnNvdXJjZSA9PT0gJ3N0cmluZycgJiYgbWV0YWRhdGEuc291cmNlLnRyaW0oKSkgcmVzdWx0LnNvdXJjZSA9IG1ldGFkYXRhLnNvdXJjZS50cmltKClcclxuICAgIGlmICh0eXBlb2YgbWV0YWRhdGEubGFuZ3VhZ2UgPT09ICdzdHJpbmcnICYmIG1ldGFkYXRhLmxhbmd1YWdlLnRyaW0oKSkgcmVzdWx0Lmxhbmd1YWdlID0gbWV0YWRhdGEubGFuZ3VhZ2UudHJpbSgpXHJcbiAgICBpZiAodHlwZW9mIG1ldGFkYXRhLmdlbmVyYXRlZF9hdCA9PT0gJ3N0cmluZycgJiYgbWV0YWRhdGEuZ2VuZXJhdGVkX2F0LnRyaW0oKSkgcmVzdWx0LmdlbmVyYXRlZF9hdCA9IG1ldGFkYXRhLmdlbmVyYXRlZF9hdC50cmltKClcclxuICAgIHJlc3VsdC5sYW5ndWFnZSA9ICdlcydcclxuICAgIHJldHVybiByZXN1bHRcclxuICB9XHJcblxyXG4gIGNvbnN0IG5vcm1hbGl6ZUZyb250ID0gKGVudHJ5OiBhbnksIGZhbGxiYWNrQW5jaG9yOiBzdHJpbmcpID0+IHtcclxuICAgIGNvbnN0IHByZXNlbnQgPSB0eXBlb2YgZW50cnkgPT09ICdib29sZWFuJyA/IGVudHJ5IDogQm9vbGVhbihlbnRyeT8ucHJlc2VudClcclxuICAgIGNvbnN0IGFuY2hvclJhdyA9IHR5cGVvZiBlbnRyeT8uYW5jaG9yID09PSAnc3RyaW5nJyAmJiBlbnRyeS5hbmNob3IudHJpbSgpLmxlbmd0aCA/IGVudHJ5LmFuY2hvci50cmltKCkgOiAnJ1xyXG4gICAgY29uc3QgYW5jaG9yID0gcHJlc2VudCA/IGVuc3VyZUFuY2hvcihhbmNob3JSYXcsIGZhbGxiYWNrQW5jaG9yLCBmYWxsYmFja0FuY2hvcikgOiBhbmNob3JSYXcgfHwgbnVsbFxyXG4gICAgY29uc3QgcGFnZXNBcnJheSA9IEFycmF5LmlzQXJyYXkoZW50cnk/LnBhZ2VzKSA/IHRvUGFnZXNBcnJheShlbnRyeS5wYWdlcykuc2xpY2UoMCwgMikgOiBbXVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcHJlc2VudCxcclxuICAgICAgYW5jaG9yLFxyXG4gICAgICBwYWdlczogcHJlc2VudCAmJiBwYWdlc0FycmF5Lmxlbmd0aCA/IHBhZ2VzQXJyYXkgOiBudWxsLFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3Qgbm9ybWFsaXplZE1ldGFkYXRhID0gc2FuaXRpemVNZXRhZGF0YShvdXRsaW5lLm1ldGFkYXRhKVxyXG4gIGNvbnN0IG5vcm1hbGl6ZWRUaXR1bG9zID0gc2FuaXRpemVUaXR1bG9zKG91dGxpbmUudGl0dWxvcylcclxuXHJcbiAgY29uc3Qgc2FuaXRpemVkRGlzcG9zaWNpb25lcyA9IHtcclxuICAgIGFkaWNpb25hbGVzOiBkaXNwb3NpdGlvbkJ1Y2tldHMuYWRpY2lvbmFsZXMsXHJcbiAgICB0cmFuc2l0b3JpYXM6IGRpc3Bvc2l0aW9uQnVja2V0cy50cmFuc2l0b3JpYXMsXHJcbiAgICBkZXJvZ2F0b3JpYXM6IGRpc3Bvc2l0aW9uQnVja2V0cy5kZXJvZ2F0b3JpYXMsXHJcbiAgICBmaW5hbGVzOiBkaXNwb3NpdGlvbkJ1Y2tldHMuZmluYWxlcyxcclxuICB9XHJcblxyXG4gIGNvbnN0IGZyb250UmF3ID0gb3V0bGluZT8uZnJvbnRfbWF0dGVyICYmIHR5cGVvZiBvdXRsaW5lLmZyb250X21hdHRlciA9PT0gJ29iamVjdCcgPyBvdXRsaW5lLmZyb250X21hdHRlciA6IHt9XHJcbiAgY29uc3Qgc2FuaXRpemVkRnJvbnQgPSB7XHJcbiAgICBwcmVhbWJ1bG86IG5vcm1hbGl6ZUZyb250KFxyXG4gICAgICBmcm9udFJhdy5wcmVhbWJ1bG8gPz8gZnJvbnRSYXcucHJlYW1idWxvX3ByZXNlbnQgPz8gZnJvbnRSYXcucHJlYW1idWxvX2Jvb2wgPz8gZnJvbnRSYXcucHJlYW1idWxvX2ZsYWcgPz8gZnJvbnRSYXcucHJlYW1idWxvX3ZhbHVlID8/IGZhbHNlLFxyXG4gICAgICAncHJlYW1idWxvJyxcclxuICAgICksXHJcbiAgICBleHBvc2ljaW9uX21vdGl2b3M6IG5vcm1hbGl6ZUZyb250KFxyXG4gICAgICBmcm9udFJhdy5leHBvc2ljaW9uX21vdGl2b3MgPz8gZnJvbnRSYXcuZXhwb3NpY2lvbiA/PyBmcm9udFJhdy5leHBvc2ljaW9uX2RlX21vdGl2b3MgPz8gZnJvbnRSYXcuZXhwb3NpY2lvbl9ib29sID8/IGZyb250UmF3LmV4cG9zaWNpb25fZmxhZyA/PyBmcm9udFJhdy5leHBvc2ljaW9uX3ZhbHVlID8/IGZhbHNlLFxyXG4gICAgICAnZXhwb3NpY2lvbi1tb3Rpdm9zJyxcclxuICAgICksXHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgbWV0YWRhdGE6IG5vcm1hbGl6ZWRNZXRhZGF0YSxcclxuICAgIGZyb250X21hdHRlcjogc2FuaXRpemVkRnJvbnQsXHJcbiAgICB0aXR1bG9zOiBub3JtYWxpemVkVGl0dWxvcyxcclxuICAgIGRpc3Bvc2ljaW9uZXM6IHNhbml0aXplZERpc3Bvc2ljaW9uZXMsXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCByZXEuanNvbigpXHJcbiAgICBjb25zdCBzb3VyY2UgPSB0eXBlb2YgcGF5bG9hZD8uc291cmNlID09PSAnc3RyaW5nJyA/IHBheWxvYWQuc291cmNlIDogJydcclxuICAgIGNvbnN0IGxhd05hbWUgPSB0eXBlb2YgcGF5bG9hZD8ubGF3TmFtZSA9PT0gJ3N0cmluZycgPyBwYXlsb2FkLmxhd05hbWUgOiAnJ1xyXG4gICAgY29uc3Qgc2NoZW1hID0gcGF5bG9hZD8uc2NoZW1hID8/IG51bGxcclxuICAgIGNvbnN0IG1ldGFkYXRhUGF5bG9hZCA9IHBheWxvYWQ/Lm1ldGFkYXRhID8/IHt9XHJcbiAgICBjb25zdCBwYWdlc0NodW5rID0gQXJyYXkuaXNBcnJheShwYXlsb2FkPy5wYWdlc0NodW5rKSA/IHBheWxvYWQucGFnZXNDaHVuayA6IFtdXHJcblxyXG4gICAgaWYgKCFwYWdlc0NodW5rLmxlbmd0aCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBvazogZmFsc2UsIGVycm9yOiAncGFnZXNDaHVuayByZXF1ZXJpZG8nIH0sIHsgc3RhdHVzOiA0MDAgfSlcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBub3JtYWxpemVkUGFnZXM6IFBhZ2VFbnRyeVtdID0gcGFnZXNDaHVuay5tYXAoKGVudHJ5OiBhbnksIGlkeDogbnVtYmVyKSA9PiAoe1xyXG4gICAgICBudW06IHR5cGVvZiBlbnRyeT8ubnVtID09PSAnbnVtYmVyJyA/IGVudHJ5Lm51bSA6IGlkeCArIDEsXHJcbiAgICAgIHRleHQ6IHR5cGVvZiBlbnRyeT8udGV4dCA9PT0gJ3N0cmluZycgPyBlbnRyeS50ZXh0IDogJycsXHJcbiAgICB9KSlcclxuXHJcbiAgICBjb25zdCBoYXNDb250ZW50ID0gbm9ybWFsaXplZFBhZ2VzLnNvbWUoKGVudHJ5KSA9PiBlbnRyeS50ZXh0LnRyaW0oKS5sZW5ndGggPiAwKVxyXG4gICAgaWYgKCFoYXNDb250ZW50KSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG9rOiBmYWxzZSwgZXJyb3I6ICdTaW4gdGV4dG8gdXRpbGl6YWJsZSBlbiBwYWdlc0NodW5rJyB9LCB7IHN0YXR1czogNDAwIH0pXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZmlyc3RQYWdlID0gbm9ybWFsaXplZFBhZ2VzWzBdLm51bVxyXG4gICAgY29uc3QgbGFzdFBhZ2UgPSBub3JtYWxpemVkUGFnZXNbbm9ybWFsaXplZFBhZ2VzLmxlbmd0aCAtIDFdLm51bVxyXG4gICAgY29uc3QgeyB0ZXh0IH0gPSBidWlsZFRleHRGcm9tUGFnZXMobm9ybWFsaXplZFBhZ2VzKVxyXG4gICAgY29uc3QgbWV0YWRhdGEgPSB7XHJcbiAgICAgIGRvY3VtZW50X3RpdGxlOiB0eXBlb2YgbWV0YWRhdGFQYXlsb2FkPy5kb2N1bWVudF90aXRsZSA9PT0gJ3N0cmluZycgJiYgbWV0YWRhdGFQYXlsb2FkLmRvY3VtZW50X3RpdGxlLnRyaW0oKS5sZW5ndGhcclxuICAgICAgICA/IG1ldGFkYXRhUGF5bG9hZC5kb2N1bWVudF90aXRsZVxyXG4gICAgICAgIDogbGF3TmFtZSB8fCBzb3VyY2UgfHwgJ0RvY3VtZW50byBsZWdhbCcsXHJcbiAgICAgIHNvdXJjZTogdHlwZW9mIG1ldGFkYXRhUGF5bG9hZD8uc291cmNlID09PSAnc3RyaW5nJyAmJiBtZXRhZGF0YVBheWxvYWQuc291cmNlLnRyaW0oKS5sZW5ndGhcclxuICAgICAgICA/IG1ldGFkYXRhUGF5bG9hZC5zb3VyY2VcclxuICAgICAgICA6IHNvdXJjZSB8fCBsYXdOYW1lIHx8ICdEb2N1bWVudG8gbGVnYWwnLFxyXG4gICAgICBsYW5ndWFnZTogdHlwZW9mIG1ldGFkYXRhUGF5bG9hZD8ubGFuZ3VhZ2UgPT09ICdzdHJpbmcnICYmIG1ldGFkYXRhUGF5bG9hZC5sYW5ndWFnZS50cmltKCkubGVuZ3RoXHJcbiAgICAgICAgPyBtZXRhZGF0YVBheWxvYWQubGFuZ3VhZ2VcclxuICAgICAgICA6ICdlcycsXHJcbiAgICAgIGdlbmVyYXRlZF9hdDogdHlwZW9mIG1ldGFkYXRhUGF5bG9hZD8uZ2VuZXJhdGVkX2F0ID09PSAnc3RyaW5nJyAmJiBtZXRhZGF0YVBheWxvYWQuZ2VuZXJhdGVkX2F0LnRyaW0oKS5sZW5ndGhcclxuICAgICAgICA/IG1ldGFkYXRhUGF5bG9hZC5nZW5lcmF0ZWRfYXRcclxuICAgICAgICA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCksXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcHJvbXB0ID0gYnVpbGRNZW50YWxPdXRsaW5lQ2h1bmtQcm9tcHQoe1xyXG4gICAgICBzb3VyY2U6IHNvdXJjZSB8fCBsYXdOYW1lLFxyXG4gICAgICBzY2hlbWFBY3VtdWxhZG86IHNjaGVtYSxcclxuICAgICAgbG90ZVRleHRvOiB0ZXh0LFxyXG4gICAgICByYW5nb1BhZ2luYXM6IFtmaXJzdFBhZ2UsIGxhc3RQYWdlXSxcclxuICAgICAgbWV0YWRhdGEsXHJcbiAgICB9KVxyXG5cclxuICAgIGxvZ0V2ZW50KCdtZW50YWxPdXRsaW5lLmNodW5rLnByb21wdCcsIHtcclxuICAgICAgc291cmNlOiBzb3VyY2UgfHwgbGF3TmFtZSxcclxuICAgICAgZnJvbTogZmlyc3RQYWdlLFxyXG4gICAgICB0bzogbGFzdFBhZ2UsXHJcbiAgICAgIHNpemU6IHRleHQubGVuZ3RoLFxyXG4gICAgfSlcclxuXHJcbiAgICBjb25zdCBvdXRsaW5lID0gYXdhaXQgY2FsbE1vZGVsSlNPTihwcm9tcHQsIDYwMDAwLCA0MDAwLCB7XHJcbiAgICAgIGVuZHBvaW50OiAnbWVudGFsLW91dGxpbmUtY2h1bmsnLFxyXG4gICAgICBzb3VyY2U6IHNvdXJjZSB8fCBsYXdOYW1lLFxyXG4gICAgICByYW5nZTogW2ZpcnN0UGFnZSwgbGFzdFBhZ2VdLFxyXG4gICAgICBwYWdlczogbm9ybWFsaXplZFBhZ2VzLmxlbmd0aCxcclxuICAgIH0pXHJcblxyXG4gICAgY29uc3Qgc2NoZW1hQWN1bXVsYWRvUmF3ID0gb3V0bGluZT8uc2NoZW1hX2FjdW11bGFkbyA/PyBvdXRsaW5lXHJcblxyXG4gICAgbG9nRXZlbnQoJ21lbnRhbE91dGxpbmUuY2h1bmsucmVzcG9uc2UnLCB7XHJcbiAgICAgIHNvdXJjZTogc291cmNlIHx8IGxhd05hbWUsXHJcbiAgICAgIGZyb206IGZpcnN0UGFnZSxcclxuICAgICAgdG86IGxhc3RQYWdlLFxyXG4gICAgICB0aXR1bG9zOiBBcnJheS5pc0FycmF5KHNjaGVtYUFjdW11bGFkb1Jhdz8udGl0dWxvcykgPyBzY2hlbWFBY3VtdWxhZG9SYXcudGl0dWxvcy5sZW5ndGggOiB1bmRlZmluZWQsXHJcbiAgICB9KVxyXG5cclxuICAgIGlmICghc2NoZW1hQWN1bXVsYWRvUmF3IHx8IHR5cGVvZiBzY2hlbWFBY3VtdWxhZG9SYXcgIT09ICdvYmplY3QnKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignUmVzcHVlc3RhIHNpbiBlc3F1ZW1hIHbDoWxpZG8nKVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHNjaGVtYUFjdW11bGFkb1Jhd09iaiA9IHtcclxuICAgICAgbWV0YWRhdGE6IHNjaGVtYUFjdW11bGFkb1Jhdy5tZXRhZGF0YSxcclxuICAgICAgZnJvbnRfbWF0dGVyOiBzY2hlbWFBY3VtdWxhZG9SYXcuZnJvbnRfbWF0dGVyLFxyXG4gICAgICB0aXR1bG9zOiBzY2hlbWFBY3VtdWxhZG9SYXcudGl0dWxvcyxcclxuICAgICAgZGlzcG9zaWNpb25lczogc2NoZW1hQWN1bXVsYWRvUmF3LmRpc3Bvc2ljaW9uZXMsXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc2NoZW1hQWN1bXVsYWRvID0gc2FuaXRpemVPdXRsaW5lKHNjaGVtYUFjdW11bGFkb1Jhd09iailcclxuXHJcbiAgICBjb25zdCB2YWxpZCA9IHZhbGlkYXRlTWVudGFsT3V0bGluZShzY2hlbWFBY3VtdWxhZG8pXHJcbiAgICBpZiAoIXZhbGlkKSB7XHJcbiAgICAgIGNvbnN0IGRldGFpbHMgPSAodmFsaWRhdGVNZW50YWxPdXRsaW5lLmVycm9ycyB8fCBbXSkubWFwKChlcnIpID0+IGAke2Vyci5pbnN0YW5jZVBhdGggfHwgJy8nfSAke2Vyci5tZXNzYWdlfWApLmpvaW4oJzsgJylcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBSZXNwdWVzdGEgaW52w6FsaWRhIChzY2hlbWEpOiAke2RldGFpbHN9YClcclxuICAgIH1cclxuXHJcbiAgICAvLyBjb3JyaWdlIGZyb250IG1hdHRlciBwYXJhIG1hcGVhciBhIHDDoWdpbmFzIHJlYWxlcyBzaSBlcyBuZWNlc2FyaW9cclxuICAgIGlmIChzY2hlbWFBY3VtdWxhZG8uZnJvbnRfbWF0dGVyKSB7XHJcbiAgICAgIGNvbnN0IG1hcFBhZ2UgPSAocGFnZXM6IG51bWJlcltdIHwgbnVsbCkgPT4ge1xyXG4gICAgICAgIGlmICghcGFnZXMgfHwgcGFnZXMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbFxyXG4gICAgICAgIGNvbnN0IG1hcHBlZCA9IHBhZ2VzLm1hcCgocCkgPT4gbm9ybWFsaXplZFBhZ2VzWzBdLm51bSArIChwIC0gcGFnZXNbMF0pKS5maWx0ZXIoKHApID0+IE51bWJlci5pc0ludGVnZXIocCkpXHJcbiAgICAgICAgcmV0dXJuIG1hcHBlZC5sZW5ndGggPyBtYXBwZWQgYXMgbnVtYmVyW10gOiBwYWdlc1xyXG4gICAgICB9XHJcbiAgICAgIHNjaGVtYUFjdW11bGFkby5mcm9udF9tYXR0ZXIucHJlYW1idWxvLnBhZ2VzID0gbWFwUGFnZShzY2hlbWFBY3VtdWxhZG8uZnJvbnRfbWF0dGVyLnByZWFtYnVsby5wYWdlcylcclxuICAgICAgaWYgKHNjaGVtYUFjdW11bGFkby5mcm9udF9tYXR0ZXIuZXhwb3NpY2lvbl9tb3Rpdm9zKSB7XHJcbiAgICAgICAgc2NoZW1hQWN1bXVsYWRvLmZyb250X21hdHRlci5leHBvc2ljaW9uX21vdGl2b3MucGFnZXMgPSBtYXBQYWdlKHNjaGVtYUFjdW11bGFkby5mcm9udF9tYXR0ZXIuZXhwb3NpY2lvbl9tb3Rpdm9zLnBhZ2VzKVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgb2s6IHRydWUsIG91dGxpbmU6IHNjaGVtYUFjdW11bGFkbyB9KVxyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIGNvbnN0IG1lc3NhZ2UgPSB0eXBlb2YgZXJyb3I/Lm1lc3NhZ2UgPT09ICdzdHJpbmcnID8gZXJyb3IubWVzc2FnZSA6ICdFcnJvciBnZW5lcmFuZG8gZXNxdWVtYSBwb3IgbG90ZXMnXHJcbiAgICBsb2dFdmVudCgnbWVudGFsT3V0bGluZS5jaHVuay5lcnJvcicsIHsgZXJyb3I6IG1lc3NhZ2UgfSlcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG9rOiBmYWxzZSwgZXJyb3I6IG1lc3NhZ2UgfSwgeyBzdGF0dXM6IDUwMCB9KVxyXG4gIH1cclxufVxyXG5cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImJ1aWxkTWVudGFsT3V0bGluZUNodW5rUHJvbXB0IiwiY2FsbE1vZGVsSlNPTiIsImxvZ0V2ZW50IiwiYnVpbGRUZXh0RnJvbVBhZ2VzIiwibWVudGFsT3V0bGluZVNjaGVtYSIsIkFqdjIwMjAiLCJhZGRGb3JtYXRzIiwicnVudGltZSIsImFqdiIsImFsbEVycm9ycyIsInZhbGlkYXRlTWVudGFsT3V0bGluZSIsImNvbXBpbGUiLCJzYW5pdGl6ZUFydGljbGVUZXh0IiwidGV4dCIsImZpcnN0TGluZSIsInNwbGl0IiwidHJpbSIsImxlbmd0aCIsInNsaWNlIiwidHJpbUVuZCIsInNhbml0aXplT3V0bGluZSIsIm91dGxpbmUiLCJzbHVnaWZ5IiwiaW5wdXQiLCJmYWxsYmFjayIsInZhbHVlIiwic2x1ZyIsInRvTG93ZXJDYXNlIiwibm9ybWFsaXplIiwicmVwbGFjZSIsInRvUGFnZXNBcnJheSIsInBhZ2VzIiwiQXJyYXkiLCJpc0FycmF5IiwiZmlsdGVyZWQiLCJtYXAiLCJuIiwiTWF0aCIsInRydW5jIiwiTnVtYmVyIiwiZmlsdGVyIiwiaXNJbnRlZ2VyIiwiZnJvbSIsIlNldCIsInNvcnQiLCJhIiwiYiIsImVuc3VyZUFuY2hvciIsInNlZWQiLCJmYWxsYmFja1ByZWZpeCIsImRlcml2ZU9yZGluYWwiLCJyYXciLCJyZWdleCIsIm1hdGNoIiwidG9VcHBlckNhc2UiLCJzYW5pdGl6ZUFydGljdWxvcyIsImFydGljdWxvcyIsImFydCIsIm51bWVybyIsImFydGljdWxvX251bSIsIlN0cmluZyIsImFydGljdWxvIiwiYXJ0aWN1bG9fbnVtZXJvIiwidGV4dG8iLCJhcnRpY3Vsb190ZXh0byIsInRleHRvX2VuY2FiZXphZG8iLCJ0aXR1bG8iLCJhbmNob3IiLCJwYWdlU291cmNlIiwicmFuZ29fcGFnaW5hcyIsInJhbmdvIiwicGFnZSIsInNhbml0aXplU2VjY2lvbmVzIiwic2VjY2lvbmVzIiwic2VjIiwiYmFzZVRleHQiLCJzZWNjaW9uX3RleHRvIiwib3JkaW5hbCIsInNlY2Npb25UZXh0byIsInNhbml0aXplQ2FwaXR1bG9zIiwiY2FwaXR1bG9zIiwiY2FwIiwiY2FwaXR1bG9fdGV4dG8iLCJjYXBpdHVsb1RleHRvIiwic2FuaXRpemVUaXR1bG9zIiwidGl0dWxvcyIsImRhdGEiLCJrZXlzIiwiT2JqZWN0IiwiY2FuZGlkYXRlIiwidGl0dWxvX3RleHRvIiwidGV4dHVhbCIsInRpdGxlS2V5IiwiZmluZCIsImsiLCJ0ZXN0IiwidGl0dWxvVGV4dG8iLCJjYXBpdHVsb3NSYXciLCJhcnRpY3Vsb3NSYXciLCJldmVyeSIsIml0ZW0iLCJpZHgiLCJzYW5pdGl6ZURpc3Bvc2ljaW9uZXMiLCJpdGVtcyIsImRpcyIsImRpc3Bvc2l0aW9uQnVja2V0cyIsImFkaWNpb25hbGVzIiwidHJhbnNpdG9yaWFzIiwiZGVyb2dhdG9yaWFzIiwiZmluYWxlcyIsInB1c2hEaXNwb3NJdGVtcyIsImVudHJpZXMiLCJ0eXBlIiwicHVzaCIsImNsYXNzaWZ5RGlzcG9zUHJvcHMiLCJrZXkiLCJsb3dlciIsImluY2x1ZGVzIiwiZGlzcG9zaWNpb25lcyIsInNhbml0aXplTWV0YWRhdGEiLCJtZXRhZGF0YSIsImRvY3VtZW50X3RpdGxlIiwic291cmNlIiwibGFuZ3VhZ2UiLCJnZW5lcmF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJyZXN1bHQiLCJub3JtYWxpemVGcm9udCIsImVudHJ5IiwiZmFsbGJhY2tBbmNob3IiLCJwcmVzZW50IiwiQm9vbGVhbiIsImFuY2hvclJhdyIsInBhZ2VzQXJyYXkiLCJub3JtYWxpemVkTWV0YWRhdGEiLCJub3JtYWxpemVkVGl0dWxvcyIsInNhbml0aXplZERpc3Bvc2ljaW9uZXMiLCJmcm9udFJhdyIsImZyb250X21hdHRlciIsInNhbml0aXplZEZyb250IiwicHJlYW1idWxvIiwicHJlYW1idWxvX3ByZXNlbnQiLCJwcmVhbWJ1bG9fYm9vbCIsInByZWFtYnVsb19mbGFnIiwicHJlYW1idWxvX3ZhbHVlIiwiZXhwb3NpY2lvbl9tb3Rpdm9zIiwiZXhwb3NpY2lvbiIsImV4cG9zaWNpb25fZGVfbW90aXZvcyIsImV4cG9zaWNpb25fYm9vbCIsImV4cG9zaWNpb25fZmxhZyIsImV4cG9zaWNpb25fdmFsdWUiLCJQT1NUIiwicmVxIiwicGF5bG9hZCIsImpzb24iLCJsYXdOYW1lIiwic2NoZW1hIiwibWV0YWRhdGFQYXlsb2FkIiwicGFnZXNDaHVuayIsIm9rIiwiZXJyb3IiLCJzdGF0dXMiLCJub3JtYWxpemVkUGFnZXMiLCJudW0iLCJoYXNDb250ZW50Iiwic29tZSIsImZpcnN0UGFnZSIsImxhc3RQYWdlIiwicHJvbXB0Iiwic2NoZW1hQWN1bXVsYWRvIiwibG90ZVRleHRvIiwicmFuZ29QYWdpbmFzIiwidG8iLCJzaXplIiwiZW5kcG9pbnQiLCJyYW5nZSIsInNjaGVtYUFjdW11bGFkb1JhdyIsInNjaGVtYV9hY3VtdWxhZG8iLCJ1bmRlZmluZWQiLCJFcnJvciIsInNjaGVtYUFjdW11bGFkb1Jhd09iaiIsInZhbGlkIiwiZGV0YWlscyIsImVycm9ycyIsImVyciIsImluc3RhbmNlUGF0aCIsIm1lc3NhZ2UiLCJqb2luIiwibWFwUGFnZSIsIm1hcHBlZCIsInAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/mental-outline/chunk/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/logging/logger.ts":
/*!*******************************!*\
  !*** ./lib/logging/logger.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   logEvent: () => (/* binding */ logEvent)\n/* harmony export */ });\n/* harmony import */ var node_fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:fs */ \"node:fs\");\n/* harmony import */ var node_fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:path */ \"node:path\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(node_path__WEBPACK_IMPORTED_MODULE_1__);\n\n\nfunction ensureDir(dir) {\n    try {\n        node_fs__WEBPACK_IMPORTED_MODULE_0___default().mkdirSync(dir, {\n            recursive: true\n        });\n    } catch  {\n    // ignore\n    }\n}\nfunction logEvent(event, payload) {\n    const line = JSON.stringify({\n        ts: new Date().toISOString(),\n        event,\n        payload\n    });\n    try {\n        const dir = node_path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"logs\");\n        ensureDir(dir);\n        const file = node_path__WEBPACK_IMPORTED_MODULE_1___default().join(dir, \"app.jsonl\");\n        node_fs__WEBPACK_IMPORTED_MODULE_0___default().appendFileSync(file, line + \"\\n\", \"utf8\");\n    } catch  {\n        console.log(\"[log]\", line);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbG9nZ2luZy9sb2dnZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0I7QUFDSTtBQUU1QixTQUFTRSxVQUFVQyxHQUFXO0lBQzVCLElBQUk7UUFDRkgsd0RBQVksQ0FBQ0csS0FBSztZQUFFRSxXQUFXO1FBQUs7SUFDdEMsRUFBRSxPQUFNO0lBQ04sU0FBUztJQUNYO0FBQ0Y7QUFFTyxTQUFTQyxTQUFTQyxLQUFhLEVBQUVDLE9BQWdCO0lBQ3RELE1BQU1DLE9BQU9DLEtBQUtDLFNBQVMsQ0FBQztRQUFFQyxJQUFJLElBQUlDLE9BQU9DLFdBQVc7UUFBSVA7UUFBT0M7SUFBUTtJQUMzRSxJQUFJO1FBQ0YsTUFBTUwsTUFBTUYscURBQVMsQ0FBQ2UsUUFBUUMsR0FBRyxJQUFJO1FBQ3JDZixVQUFVQztRQUNWLE1BQU1lLE9BQU9qQixxREFBUyxDQUFDRSxLQUFLO1FBQzVCSCw2REFBaUIsQ0FBQ2tCLE1BQU1ULE9BQU8sTUFBTTtJQUN2QyxFQUFFLE9BQU07UUFDTlcsUUFBUUMsR0FBRyxDQUFDLFNBQVNaO0lBQ3ZCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm0tdW9jLWlhLy4vbGliL2xvZ2dpbmcvbG9nZ2VyLnRzP2YyNDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZzIGZyb20gJ25vZGU6ZnMnXHJcbmltcG9ydCBwYXRoIGZyb20gJ25vZGU6cGF0aCdcclxuXHJcbmZ1bmN0aW9uIGVuc3VyZURpcihkaXI6IHN0cmluZykge1xyXG4gIHRyeSB7XHJcbiAgICBmcy5ta2RpclN5bmMoZGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KVxyXG4gIH0gY2F0Y2gge1xyXG4gICAgLy8gaWdub3JlXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbG9nRXZlbnQoZXZlbnQ6IHN0cmluZywgcGF5bG9hZDogdW5rbm93bikge1xyXG4gIGNvbnN0IGxpbmUgPSBKU09OLnN0cmluZ2lmeSh7IHRzOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIGV2ZW50LCBwYXlsb2FkIH0pXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGRpciA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnbG9ncycpXHJcbiAgICBlbnN1cmVEaXIoZGlyKVxyXG4gICAgY29uc3QgZmlsZSA9IHBhdGguam9pbihkaXIsICdhcHAuanNvbmwnKVxyXG4gICAgZnMuYXBwZW5kRmlsZVN5bmMoZmlsZSwgbGluZSArICdcXG4nLCAndXRmOCcpXHJcbiAgfSBjYXRjaCB7XHJcbiAgICBjb25zb2xlLmxvZygnW2xvZ10nLCBsaW5lKVxyXG4gIH1cclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdLCJuYW1lcyI6WyJmcyIsInBhdGgiLCJlbnN1cmVEaXIiLCJkaXIiLCJta2RpclN5bmMiLCJyZWN1cnNpdmUiLCJsb2dFdmVudCIsImV2ZW50IiwicGF5bG9hZCIsImxpbmUiLCJKU09OIiwic3RyaW5naWZ5IiwidHMiLCJEYXRlIiwidG9JU09TdHJpbmciLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsImZpbGUiLCJhcHBlbmRGaWxlU3luYyIsImNvbnNvbGUiLCJsb2ciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/logging/logger.ts\n");

/***/ }),

/***/ "(rsc)/./lib/pdf/pagesMap.ts":
/*!*****************************!*\
  !*** ./lib/pdf/pagesMap.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildTextFromPages: () => (/* binding */ buildTextFromPages)\n/* harmony export */ });\nfunction buildTextFromPages(pages) {\n    const joiner = \"\\n\\n\";\n    let offset = 0;\n    const body = [];\n    const pagesMap = [];\n    pages.forEach((page, index)=>{\n        const raw = typeof page?.text === \"string\" ? page.text : \"\";\n        const text = raw.trimEnd();\n        const start = offset;\n        const end = start + text.length;\n        pagesMap.push({\n            page: typeof page?.num === \"number\" ? page.num : index + 1,\n            start_offset: start,\n            end_offset: end\n        });\n        body.push(text);\n        offset = end;\n        if (index < pages.length - 1) {\n            offset += joiner.length;\n        }\n    });\n    return {\n        text: body.join(joiner),\n        pagesMap\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcGRmL3BhZ2VzTWFwLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFXTyxTQUFTQSxtQkFBbUJDLEtBQWtCO0lBQ25ELE1BQU1DLFNBQVM7SUFDZixJQUFJQyxTQUFTO0lBQ2IsTUFBTUMsT0FBaUIsRUFBRTtJQUN6QixNQUFNQyxXQUE0QixFQUFFO0lBRXBDSixNQUFNSyxPQUFPLENBQUMsQ0FBQ0MsTUFBTUM7UUFDbkIsTUFBTUMsTUFBTSxPQUFPRixNQUFNRyxTQUFTLFdBQVdILEtBQUtHLElBQUksR0FBRztRQUN6RCxNQUFNQSxPQUFPRCxJQUFJRSxPQUFPO1FBQ3hCLE1BQU1DLFFBQVFUO1FBQ2QsTUFBTVUsTUFBTUQsUUFBUUYsS0FBS0ksTUFBTTtRQUMvQlQsU0FBU1UsSUFBSSxDQUFDO1lBQ1pSLE1BQU0sT0FBT0EsTUFBTVMsUUFBUSxXQUFXVCxLQUFLUyxHQUFHLEdBQUdSLFFBQVE7WUFDekRTLGNBQWNMO1lBQ2RNLFlBQVlMO1FBQ2Q7UUFDQVQsS0FBS1csSUFBSSxDQUFDTDtRQUNWUCxTQUFTVTtRQUNULElBQUlMLFFBQVFQLE1BQU1hLE1BQU0sR0FBRyxHQUFHO1lBQzVCWCxVQUFVRCxPQUFPWSxNQUFNO1FBQ3pCO0lBQ0Y7SUFFQSxPQUFPO1FBQUVKLE1BQU1OLEtBQUtlLElBQUksQ0FBQ2pCO1FBQVNHO0lBQVM7QUFDN0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm0tdW9jLWlhLy4vbGliL3BkZi9wYWdlc01hcC50cz83OTllIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB0eXBlIFBhZ2VFbnRyeSA9IHtcclxuICBudW06IG51bWJlclxyXG4gIHRleHQ6IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBQYWdlc01hcEVudHJ5ID0ge1xyXG4gIHBhZ2U6IG51bWJlclxyXG4gIHN0YXJ0X29mZnNldDogbnVtYmVyXHJcbiAgZW5kX29mZnNldDogbnVtYmVyXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBidWlsZFRleHRGcm9tUGFnZXMocGFnZXM6IFBhZ2VFbnRyeVtdKSB7XHJcbiAgY29uc3Qgam9pbmVyID0gJ1xcblxcbidcclxuICBsZXQgb2Zmc2V0ID0gMFxyXG4gIGNvbnN0IGJvZHk6IHN0cmluZ1tdID0gW11cclxuICBjb25zdCBwYWdlc01hcDogUGFnZXNNYXBFbnRyeVtdID0gW11cclxuXHJcbiAgcGFnZXMuZm9yRWFjaCgocGFnZSwgaW5kZXgpID0+IHtcclxuICAgIGNvbnN0IHJhdyA9IHR5cGVvZiBwYWdlPy50ZXh0ID09PSAnc3RyaW5nJyA/IHBhZ2UudGV4dCA6ICcnXHJcbiAgICBjb25zdCB0ZXh0ID0gcmF3LnRyaW1FbmQoKVxyXG4gICAgY29uc3Qgc3RhcnQgPSBvZmZzZXRcclxuICAgIGNvbnN0IGVuZCA9IHN0YXJ0ICsgdGV4dC5sZW5ndGhcclxuICAgIHBhZ2VzTWFwLnB1c2goe1xyXG4gICAgICBwYWdlOiB0eXBlb2YgcGFnZT8ubnVtID09PSAnbnVtYmVyJyA/IHBhZ2UubnVtIDogaW5kZXggKyAxLFxyXG4gICAgICBzdGFydF9vZmZzZXQ6IHN0YXJ0LFxyXG4gICAgICBlbmRfb2Zmc2V0OiBlbmQsXHJcbiAgICB9KVxyXG4gICAgYm9keS5wdXNoKHRleHQpXHJcbiAgICBvZmZzZXQgPSBlbmRcclxuICAgIGlmIChpbmRleCA8IHBhZ2VzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgb2Zmc2V0ICs9IGpvaW5lci5sZW5ndGhcclxuICAgIH1cclxuICB9KVxyXG5cclxuICByZXR1cm4geyB0ZXh0OiBib2R5LmpvaW4oam9pbmVyKSwgcGFnZXNNYXAgfVxyXG59XHJcblxyXG5cclxuXHJcbiJdLCJuYW1lcyI6WyJidWlsZFRleHRGcm9tUGFnZXMiLCJwYWdlcyIsImpvaW5lciIsIm9mZnNldCIsImJvZHkiLCJwYWdlc01hcCIsImZvckVhY2giLCJwYWdlIiwiaW5kZXgiLCJyYXciLCJ0ZXh0IiwidHJpbUVuZCIsInN0YXJ0IiwiZW5kIiwibGVuZ3RoIiwicHVzaCIsIm51bSIsInN0YXJ0X29mZnNldCIsImVuZF9vZmZzZXQiLCJqb2luIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/pdf/pagesMap.ts\n");

/***/ }),

/***/ "(rsc)/./lib/qa/callModel.ts":
/*!*****************************!*\
  !*** ./lib/qa/callModel.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   callModel: () => (/* binding */ callModel),\n/* harmony export */   callModelJSON: () => (/* binding */ callModelJSON)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var _lib_logging_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/logging/logger */ \"(rsc)/./lib/logging/logger.ts\");\n\n\n// Cliente compatible con Edge y Node (usa fetch por defecto)\nconst client = new openai__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY,\n    baseURL: process.env.OPENAI_BASE_URL || undefined\n});\nconst questionSchema = {\n    name: \"mcq_items\",\n    schema: {\n        type: \"array\",\n        items: {\n            type: \"object\",\n            properties: {\n                pregunta: {\n                    type: \"string\"\n                },\n                opciones: {\n                    type: \"object\",\n                    properties: {\n                        A: {\n                            type: \"string\"\n                        },\n                        B: {\n                            type: \"string\"\n                        },\n                        C: {\n                            type: \"string\"\n                        },\n                        D: {\n                            type: \"string\"\n                        }\n                    },\n                    required: [\n                        \"A\",\n                        \"B\",\n                        \"C\",\n                        \"D\"\n                    ],\n                    additionalProperties: false\n                },\n                correcta: {\n                    type: \"string\",\n                    enum: [\n                        \"A\",\n                        \"B\",\n                        \"C\",\n                        \"D\"\n                    ]\n                },\n                justificacion: {\n                    type: \"string\"\n                },\n                referencia: {\n                    type: \"object\",\n                    properties: {\n                        ley: {\n                            type: \"string\"\n                        },\n                        paginas: {\n                            type: \"string\"\n                        },\n                        articulo: {\n                            type: \"string\"\n                        },\n                        parrafo: {\n                            type: \"string\"\n                        }\n                    },\n                    required: [\n                        \"ley\",\n                        \"paginas\"\n                    ],\n                    additionalProperties: true\n                }\n            },\n            required: [\n                \"pregunta\",\n                \"opciones\",\n                \"correcta\",\n                \"justificacion\",\n                \"referencia\"\n            ],\n            additionalProperties: false\n        }\n    }\n};\nfunction extractJsonArray(text) {\n    try {\n        const parsed = JSON.parse(text);\n        if (Array.isArray(parsed)) return parsed;\n    } catch  {}\n    const start = text.indexOf(\"[\");\n    const end = text.lastIndexOf(\"]\");\n    if (start >= 0 && end > start) {\n        const slice = text.slice(start, end + 1);\n        try {\n            const parsed = JSON.parse(slice);\n            if (Array.isArray(parsed)) return parsed;\n        } catch  {}\n    }\n    return [];\n}\nasync function callModel(prompt, timeoutMs = 20000) {\n    const ctrl = new AbortController();\n    const to = setTimeout(()=>ctrl.abort(), timeoutMs);\n    try {\n        const res = await client.chat.completions.create({\n            model: process.env.OPENAI_MODEL || \"gpt-4o-mini\",\n            messages: [\n                {\n                    role: \"system\",\n                    content: \"Responde SOLO con un array JSON v\\xe1lido (sin texto adicional).\"\n                },\n                {\n                    role: \"user\",\n                    content: prompt\n                }\n            ],\n            temperature: 0.2,\n            top_p: 1,\n            max_tokens: 1200\n        }, {\n            signal: ctrl.signal\n        });\n        const txt = res.choices[0]?.message?.content || \"[]\";\n        const arr = extractJsonArray(txt);\n        const items = arr.map((x)=>({\n                pregunta: String(x?.pregunta || \"\"),\n                opciones: {\n                    A: String(x?.opciones?.A || \"\"),\n                    B: String(x?.opciones?.B || \"\"),\n                    C: String(x?.opciones?.C || \"\"),\n                    D: String(x?.opciones?.D || \"\")\n                },\n                correcta: String(x?.correcta || \"A\"),\n                justificacion: String(x?.justificacion || \"\"),\n                referencia: {\n                    ley: String(x?.referencia?.ley || \"\"),\n                    paginas: String(x?.referencia?.paginas || \"\"),\n                    articulo: x?.referencia?.articulo ? String(x?.referencia?.articulo) : undefined,\n                    parrafo: x?.referencia?.parrafo ? String(x?.referencia?.parrafo) : undefined\n                }\n            }));\n        return items;\n    } finally{\n        clearTimeout(to);\n    }\n}\nasync function callModelJSON(prompt, timeoutMs = 20000, maxTokens = 500, meta) {\n    const ctrl = new AbortController();\n    const to = setTimeout(()=>ctrl.abort(), timeoutMs);\n    try {\n        (0,_lib_logging_logger__WEBPACK_IMPORTED_MODULE_0__.logEvent)(\"ai.call.json\", {\n            meta,\n            prompt_preview: prompt.slice(0, 1200),\n            prompt_length: prompt.length\n        });\n        const res = await client.chat.completions.create({\n            model: process.env.OPENAI_MODEL || \"gpt-4o-mini\",\n            messages: [\n                {\n                    role: \"system\",\n                    content: \"Responde SOLO con un objeto JSON v\\xe1lido.\"\n                },\n                {\n                    role: \"user\",\n                    content: prompt\n                }\n            ],\n            temperature: 0,\n            top_p: 1,\n            max_tokens: maxTokens,\n            response_format: {\n                type: \"json_object\"\n            }\n        }, {\n            signal: ctrl.signal\n        });\n        const txt = res.choices[0]?.message?.content || \"{}\";\n        (0,_lib_logging_logger__WEBPACK_IMPORTED_MODULE_0__.logEvent)(\"ai.response.json\", {\n            meta,\n            response_preview: txt.slice(0, 1200),\n            response_length: txt.length\n        });\n        return JSON.parse(txt);\n    } finally{\n        clearTimeout(to);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QSxNQUFNMUIsTUFBTSxNQUFNbEQsT0FBT21ELElBQUksQ0FBQ0MsV0FBVyxDQUFDQyxNQUFNLENBQzlDO1lBQ0VDLE9BQU9wRCxRQUFRQyxHQUFHLENBQUNvRCxZQUFZLElBQUk7WUFDbkNDLFVBQVU7Z0JBQ1I7b0JBQUVDLE1BQU07b0JBQVVDLFNBQVM7Z0JBQTJDO2dCQUN0RTtvQkFBRUQsTUFBTTtvQkFBUUMsU0FBU2Y7Z0JBQU87YUFDakM7WUFDRGdCLGFBQWE7WUFDYkMsT0FBTztZQUNQQyxZQUFZVztZQUNaSyxpQkFBaUI7Z0JBQUVsRSxNQUFNO1lBQWM7UUFDekMsR0FDQTtZQUFFbUQsUUFBUWpCLEtBQUtpQixNQUFNO1FBQUM7UUFFeEIsTUFBTUMsTUFBTWIsSUFBSWMsT0FBTyxDQUFDLEVBQUUsRUFBRUMsU0FBU1AsV0FBVztRQUNoRDNELDZEQUFRQSxDQUFDLG9CQUFvQjtZQUMzQjBFO1lBQ0FLLGtCQUFrQmYsSUFBSXRCLEtBQUssQ0FBQyxHQUFHO1lBQy9Cc0MsaUJBQWlCaEIsSUFBSWEsTUFBTTtRQUM3QjtRQUNBLE9BQU8zQyxLQUFLQyxLQUFLLENBQUM2QjtJQUNwQixTQUFVO1FBQ1JPLGFBQWF2QjtJQUNmO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm0tdW9jLWlhLy4vbGliL3FhL2NhbGxNb2RlbC50cz9jOTU3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBPcGVuQUkgZnJvbSAnb3BlbmFpJ1xuaW1wb3J0IHsgbG9nRXZlbnQgfSBmcm9tICdAL2xpYi9sb2dnaW5nL2xvZ2dlcidcblxuLy8gQ2xpZW50ZSBjb21wYXRpYmxlIGNvbiBFZGdlIHkgTm9kZSAodXNhIGZldGNoIHBvciBkZWZlY3RvKVxuY29uc3QgY2xpZW50ID0gbmV3IE9wZW5BSSh7XG4gIGFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVksXG4gIGJhc2VVUkw6IHByb2Nlc3MuZW52Lk9QRU5BSV9CQVNFX1VSTCB8fCB1bmRlZmluZWQsXG59KVxuXG5leHBvcnQgdHlwZSBNQ1FJdGVtID0ge1xuICBwcmVndW50YTogc3RyaW5nXG4gIG9wY2lvbmVzOiB7IEE6IHN0cmluZzsgQjogc3RyaW5nOyBDOiBzdHJpbmc7IEQ6IHN0cmluZyB9XG4gIGNvcnJlY3RhOiAnQScgfCAnQicgfCAnQycgfCAnRCdcbiAganVzdGlmaWNhY2lvbjogc3RyaW5nXG4gIHJlZmVyZW5jaWE6IHsgbGV5OiBzdHJpbmc7IHBhZ2luYXM6IHN0cmluZzsgYXJ0aWN1bG8/OiBzdHJpbmc7IHBhcnJhZm8/OiBzdHJpbmcgfVxufVxuXG5jb25zdCBxdWVzdGlvblNjaGVtYSA9IHtcbiAgbmFtZTogJ21jcV9pdGVtcycsXG4gIHNjaGVtYToge1xuICAgIHR5cGU6ICdhcnJheScsXG4gICAgaXRlbXM6IHtcbiAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICBwcmVndW50YTogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICBvcGNpb25lczoge1xuICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIEE6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgIEI6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgIEM6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgIEQ6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlcXVpcmVkOiBbJ0EnLCAnQicsICdDJywgJ0QnXSxcbiAgICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgIGNvcnJlY3RhOiB7IHR5cGU6ICdzdHJpbmcnLCBlbnVtOiBbJ0EnLCAnQicsICdDJywgJ0QnXSB9LFxuICAgICAgICBqdXN0aWZpY2FjaW9uOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgIHJlZmVyZW5jaWE6IHtcbiAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBsZXk6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgIHBhZ2luYXM6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgIGFydGljdWxvOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgICBwYXJyYWZvOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICByZXF1aXJlZDogWydsZXknLCAncGFnaW5hcyddLFxuICAgICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHJlcXVpcmVkOiBbJ3ByZWd1bnRhJywgJ29wY2lvbmVzJywgJ2NvcnJlY3RhJywgJ2p1c3RpZmljYWNpb24nLCAncmVmZXJlbmNpYSddLFxuICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlLFxuICAgIH0sXG4gIH0sXG59IGFzIGNvbnN0XG5cbmZ1bmN0aW9uIGV4dHJhY3RKc29uQXJyYXkodGV4dDogc3RyaW5nKTogdW5rbm93bltdIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKHRleHQpXG4gICAgaWYgKEFycmF5LmlzQXJyYXkocGFyc2VkKSkgcmV0dXJuIHBhcnNlZFxuICB9IGNhdGNoIHt9XG4gIGNvbnN0IHN0YXJ0ID0gdGV4dC5pbmRleE9mKCdbJylcbiAgY29uc3QgZW5kID0gdGV4dC5sYXN0SW5kZXhPZignXScpXG4gIGlmIChzdGFydCA+PSAwICYmIGVuZCA+IHN0YXJ0KSB7XG4gICAgY29uc3Qgc2xpY2UgPSB0ZXh0LnNsaWNlKHN0YXJ0LCBlbmQgKyAxKVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKHNsaWNlKVxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocGFyc2VkKSkgcmV0dXJuIHBhcnNlZFxuICAgIH0gY2F0Y2gge31cbiAgfVxuICByZXR1cm4gW11cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNhbGxNb2RlbChwcm9tcHQ6IHN0cmluZywgdGltZW91dE1zID0gMjAwMDApOiBQcm9taXNlPE1DUUl0ZW1bXT4ge1xuICBjb25zdCBjdHJsID0gbmV3IEFib3J0Q29udHJvbGxlcigpXG4gIGNvbnN0IHRvID0gc2V0VGltZW91dCgoKSA9PiBjdHJsLmFib3J0KCksIHRpbWVvdXRNcylcbiAgdHJ5IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBjbGllbnQuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoXG4gICAgICB7XG4gICAgICAgIG1vZGVsOiBwcm9jZXNzLmVudi5PUEVOQUlfTU9ERUwgfHwgJ2dwdC00by1taW5pJyxcbiAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiAnUmVzcG9uZGUgU09MTyBjb24gdW4gYXJyYXkgSlNPTiB2w6FsaWRvIChzaW4gdGV4dG8gYWRpY2lvbmFsKS4nIH0sXG4gICAgICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6IHByb21wdCB9LFxuICAgICAgICBdLFxuICAgICAgICB0ZW1wZXJhdHVyZTogMC4yLFxuICAgICAgICB0b3BfcDogMSxcbiAgICAgICAgbWF4X3Rva2VuczogMTIwMCxcbiAgICAgIH0sXG4gICAgICB7IHNpZ25hbDogY3RybC5zaWduYWwgfSBhcyBhbnksXG4gICAgKVxuICAgIGNvbnN0IHR4dCA9IHJlcy5jaG9pY2VzWzBdPy5tZXNzYWdlPy5jb250ZW50IHx8ICdbXSdcbiAgICBjb25zdCBhcnIgPSBleHRyYWN0SnNvbkFycmF5KHR4dClcbiAgICBjb25zdCBpdGVtczogTUNRSXRlbVtdID0gYXJyLm1hcCgoeDogYW55KSA9PiAoe1xuICAgICAgcHJlZ3VudGE6IFN0cmluZyh4Py5wcmVndW50YSB8fCAnJyksXG4gICAgICBvcGNpb25lczoge1xuICAgICAgICBBOiBTdHJpbmcoeD8ub3BjaW9uZXM/LkEgfHwgJycpLFxuICAgICAgICBCOiBTdHJpbmcoeD8ub3BjaW9uZXM/LkIgfHwgJycpLFxuICAgICAgICBDOiBTdHJpbmcoeD8ub3BjaW9uZXM/LkMgfHwgJycpLFxuICAgICAgICBEOiBTdHJpbmcoeD8ub3BjaW9uZXM/LkQgfHwgJycpLFxuICAgICAgfSxcbiAgICAgIGNvcnJlY3RhOiAoU3RyaW5nKHg/LmNvcnJlY3RhIHx8ICdBJykgYXMgJ0EnIHwgJ0InIHwgJ0MnIHwgJ0QnKSxcbiAgICAgIGp1c3RpZmljYWNpb246IFN0cmluZyh4Py5qdXN0aWZpY2FjaW9uIHx8ICcnKSxcbiAgICAgIHJlZmVyZW5jaWE6IHtcbiAgICAgICAgbGV5OiBTdHJpbmcoeD8ucmVmZXJlbmNpYT8ubGV5IHx8ICcnKSxcbiAgICAgICAgcGFnaW5hczogU3RyaW5nKHg/LnJlZmVyZW5jaWE/LnBhZ2luYXMgfHwgJycpLFxuICAgICAgICBhcnRpY3VsbzogeD8ucmVmZXJlbmNpYT8uYXJ0aWN1bG8gPyBTdHJpbmcoeD8ucmVmZXJlbmNpYT8uYXJ0aWN1bG8pIDogdW5kZWZpbmVkLFxuICAgICAgICBwYXJyYWZvOiB4Py5yZWZlcmVuY2lhPy5wYXJyYWZvID8gU3RyaW5nKHg/LnJlZmVyZW5jaWE/LnBhcnJhZm8pIDogdW5kZWZpbmVkLFxuICAgICAgfSxcbiAgICB9KSlcbiAgICByZXR1cm4gaXRlbXNcbiAgfSBmaW5hbGx5IHtcbiAgICBjbGVhclRpbWVvdXQodG8pXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNhbGxNb2RlbEpTT04oXG4gIHByb21wdDogc3RyaW5nLFxuICB0aW1lb3V0TXMgPSAyMDAwMCxcbiAgbWF4VG9rZW5zID0gNTAwLFxuICBtZXRhPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXG4pOiBQcm9taXNlPGFueT4ge1xuICBjb25zdCBjdHJsID0gbmV3IEFib3J0Q29udHJvbGxlcigpXG4gIGNvbnN0IHRvID0gc2V0VGltZW91dCgoKSA9PiBjdHJsLmFib3J0KCksIHRpbWVvdXRNcylcbiAgdHJ5IHtcbiAgICBsb2dFdmVudCgnYWkuY2FsbC5qc29uJywge1xuICAgICAgbWV0YSxcbiAgICAgIHByb21wdF9wcmV2aWV3OiBwcm9tcHQuc2xpY2UoMCwgMTIwMCksXG4gICAgICBwcm9tcHRfbGVuZ3RoOiBwcm9tcHQubGVuZ3RoLFxuICAgIH0pXG4gICAgY29uc3QgcmVzID0gYXdhaXQgY2xpZW50LmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKFxuICAgICAge1xuICAgICAgICBtb2RlbDogcHJvY2Vzcy5lbnYuT1BFTkFJX01PREVMIHx8ICdncHQtNG8tbWluaScsXG4gICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogJ1Jlc3BvbmRlIFNPTE8gY29uIHVuIG9iamV0byBKU09OIHbDoWxpZG8uJyB9LFxuICAgICAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiBwcm9tcHQgfSxcbiAgICAgICAgXSxcbiAgICAgICAgdGVtcGVyYXR1cmU6IDAsXG4gICAgICAgIHRvcF9wOiAxLFxuICAgICAgICBtYXhfdG9rZW5zOiBtYXhUb2tlbnMsXG4gICAgICAgIHJlc3BvbnNlX2Zvcm1hdDogeyB0eXBlOiAnanNvbl9vYmplY3QnIH0gYXMgYW55LFxuICAgICAgfSxcbiAgICAgIHsgc2lnbmFsOiBjdHJsLnNpZ25hbCB9IGFzIGFueSxcbiAgICApXG4gICAgY29uc3QgdHh0ID0gcmVzLmNob2ljZXNbMF0/Lm1lc3NhZ2U/LmNvbnRlbnQgfHwgJ3t9J1xuICAgIGxvZ0V2ZW50KCdhaS5yZXNwb25zZS5qc29uJywge1xuICAgICAgbWV0YSxcbiAgICAgIHJlc3BvbnNlX3ByZXZpZXc6IHR4dC5zbGljZSgwLCAxMjAwKSxcbiAgICAgIHJlc3BvbnNlX2xlbmd0aDogdHh0Lmxlbmd0aCxcbiAgICB9KVxuICAgIHJldHVybiBKU09OLnBhcnNlKHR4dClcbiAgfSBmaW5hbGx5IHtcbiAgICBjbGVhclRpbWVvdXQodG8pXG4gIH1cbn1cblxuXG4iXSwibmFtZXMiOlsiT3BlbkFJIiwibG9nRXZlbnQiLCJjbGllbnQiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiT1BFTkFJX0FQSV9LRVkiLCJiYXNlVVJMIiwiT1BFTkFJX0JBU0VfVVJMIiwidW5kZWZpbmVkIiwicXVlc3Rpb25TY2hlbWEiLCJuYW1lIiwic2NoZW1hIiwidHlwZSIsIml0ZW1zIiwicHJvcGVydGllcyIsInByZWd1bnRhIiwib3BjaW9uZXMiLCJBIiwiQiIsIkMiLCJEIiwicmVxdWlyZWQiLCJhZGRpdGlvbmFsUHJvcGVydGllcyIsImNvcnJlY3RhIiwiZW51bSIsImp1c3RpZmljYWNpb24iLCJyZWZlcmVuY2lhIiwibGV5IiwicGFnaW5hcyIsImFydGljdWxvIiwicGFycmFmbyIsImV4dHJhY3RKc29uQXJyYXkiLCJ0ZXh0IiwicGFyc2VkIiwiSlNPTiIsInBhcnNlIiwiQXJyYXkiLCJpc0FycmF5Iiwic3RhcnQiLCJpbmRleE9mIiwiZW5kIiwibGFzdEluZGV4T2YiLCJzbGljZSIsImNhbGxNb2RlbCIsInByb21wdCIsInRpbWVvdXRNcyIsImN0cmwiLCJBYm9ydENvbnRyb2xsZXIiLCJ0byIsInNldFRpbWVvdXQiLCJhYm9ydCIsInJlcyIsImNoYXQiLCJjb21wbGV0aW9ucyIsImNyZWF0ZSIsIm1vZGVsIiwiT1BFTkFJX01PREVMIiwibWVzc2FnZXMiLCJyb2xlIiwiY29udGVudCIsInRlbXBlcmF0dXJlIiwidG9wX3AiLCJtYXhfdG9rZW5zIiwic2lnbmFsIiwidHh0IiwiY2hvaWNlcyIsIm1lc3NhZ2UiLCJhcnIiLCJtYXAiLCJ4IiwiU3RyaW5nIiwiY2xlYXJUaW1lb3V0IiwiY2FsbE1vZGVsSlNPTiIsIm1heFRva2VucyIsIm1ldGEiLCJwcm9tcHRfcHJldmlldyIsInByb21wdF9sZW5ndGgiLCJsZW5ndGgiLCJyZXNwb25zZV9mb3JtYXQiLCJyZXNwb25zZV9wcmV2aWV3IiwicmVzcG9uc2VfbGVuZ3RoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/qa/callModel.ts\n");

/***/ }),

/***/ "(rsc)/./lib/qa/promptsMentalOutline.ts":
/*!****************************************!*\
  !*** ./lib/qa/promptsMentalOutline.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildMentalOutlineChunkPrompt: () => (/* binding */ buildMentalOutlineChunkPrompt),\n/* harmony export */   buildMentalOutlinePrompt: () => (/* binding */ buildMentalOutlinePrompt)\n/* harmony export */ });\n/* harmony import */ var _lib_schema_mentalOutline__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/schema/mentalOutline */ \"(rsc)/./lib/schema/mentalOutline.ts\");\n\nconst SCHEMA_STRING = JSON.stringify(_lib_schema_mentalOutline__WEBPACK_IMPORTED_MODULE_0__.mentalOutlineSchema, null, 2);\nconst HEURISTICS = `Heurísticas recomendadas para la estructuración:\n- Título: ^(T[IÍ]TULO(?:\\\\s+PRELIMINAR|\\\\s+[IVXLCDM]+|\\\\s+\\\\d+))\\\\b.*\n- Capítulo: ^CAP[IÍ]TULO\\\\s+(?:[IVXLCDM]+|\\\\d+)\\\\b.*\n- Sección: ^SECCI[ÓO]N\\\\s+(?:[IVXLCDM]+|\\\\d+)\\\\b.*\n- Artículo: ^Art[ií]culo\\\\s+(\\\\d+(?:\\\\s*(?:bis|ter|quater|quinquies))?)\\\\.?\\\\s*(.*)$\n- Disposición adicional: ^Disposici[óo]n\\\\s+Adicional\\\\s+(\\\\d+|[Uu]nica)\\\\b.*\n- Disposición transitoria: ^Disposici[óo]n\\\\s+Transitoria\\\\s+(\\\\d+|[Uu]nica)\\\\b.*\n- Disposición derogatoria: ^Disposici[óo]n\\\\s+Derogatoria\\\\s+(\\\\d+|[Uu]nica)\\\\b.*\n- Disposición final: ^Disposici[óo]n\\\\s+Final\\\\s+(\\\\d+|[Uu]nica)\\\\b.*\n- Preámbulo / Exposición: ^(Pre[áa]mbulo|Exposici[óo]n\\\\s+de\\\\s+motivos)\\\\b.*\n\nIgnora portadas e índices cuando contengan Portada, Créditos, Depósito legal, ISBN, Índice, Sumario, Tabla de contenido, Contents o Summary.\nNormaliza ordinales (PRELIMINAR, I/II…, números arábigos) y conserva el encabezado literal en *_texto.\nCaptura artículos con sufijo (bis/ter/…) y coloca el encabezado en articulo_texto.\nEvita duplicados usando anchor o encabezado normalizado y extiende pages como [min, max].`;\nfunction buildMentalOutlinePrompt(params) {\n    const { source, text, pagesMap } = params;\n    const safeSource = source || \"Documento sin t\\xedtulo\";\n    const trimmedText = text.trim();\n    const segments = [];\n    const escapedSource = safeSource.replace(/\"/g, '\\\\\"');\n    segments.push(`source: \"${escapedSource}\"`);\n    segments.push(`text: \"\"\"\n${trimmedText}\n\"\"\"`);\n    if (pagesMap && pagesMap.length) {\n        segments.push(`pages_map: ${JSON.stringify(pagesMap)}`);\n    }\n    return `Genera el esquema estructurado del siguiente documento legal.\n- Elimina portadas e índices.\n- Estructura: Título → (Capítulo) → (Sección) → Artículo, más Disposiciones (adicionales, transitorias, derogatorias, finales).\n- Respeta numeraciones reales (incluye bis/ter).\n- Devuelve solo JSON conforme al JSON Schema proporcionado.\n\nJSON Schema objetivo:\n${SCHEMA_STRING}\n\n${HEURISTICS}\n\n${segments.join(\"\\n\\n\")}`;\n}\nfunction summarizeSchema(schema) {\n    if (!schema) return \"null\";\n    const fmtPages = (pages)=>{\n        if (!pages || !pages.length) return \"∅\";\n        if (pages.length === 1) return `[${pages[0]}]`;\n        return `[${pages[0]}-${pages[pages.length - 1]}]`;\n    };\n    const summarizeArticulos = (articulos)=>{\n        const items = articulos || [];\n        if (!items.length) return \"art:0\";\n        const sample = items.slice(0, 3).map((a)=>a.numero).join(\", \");\n        const suffix = items.length > 3 ? ` … (${items.length})` : ` (${items.length})`;\n        return `art:${sample}${suffix}`;\n    };\n    const summarizeSecciones = (secciones)=>{\n        const items = secciones || [];\n        if (!items.length) return [];\n        return items.slice(0, 4).map((sec)=>{\n            const artSummary = summarizeArticulos(sec.articulos);\n            return `    · Sec ${sec.ordinal || \"?\"} (${sec.anchor || \"-\"}) ${fmtPages(sec.pages)} ${artSummary}`;\n        });\n    };\n    const summarizeCapitulos = (capitulos)=>{\n        const items = capitulos || [];\n        if (!items.length) return [];\n        return items.slice(0, 6).flatMap((cap)=>{\n            const lines = [\n                `  · Cap ${cap.ordinal || \"?\"} (${cap.anchor || \"-\"}) ${fmtPages(cap.pages)} sec:${cap.secciones?.length || 0} ${summarizeArticulos(cap.articulos)}`\n            ];\n            lines.push(...summarizeSecciones(cap.secciones));\n            return lines;\n        });\n    };\n    const lines = [];\n    lines.push(`metadata: \"${schema.metadata.document_title}\" | source: \"${schema.metadata.source}\" | lang: ${schema.metadata.language} | generated_at: ${schema.metadata.generated_at}`);\n    lines.push(`front_matter: preambulo=${schema.front_matter.preambulo.present} ${fmtPages(schema.front_matter.preambulo.pages)} | exposicion=${schema.front_matter.exposicion_motivos.present} ${fmtPages(schema.front_matter.exposicion_motivos.pages)}`);\n    lines.push(`titulos: ${schema.titulos.length}`);\n    schema.titulos.slice(0, 12).forEach((titulo)=>{\n        lines.push(`- Título ${titulo.ordinal || \"?\"} (${titulo.anchor || \"-\"}) ${fmtPages(titulo.pages)} cap:${titulo.capitulos?.length || 0} ${summarizeArticulos(titulo.articulos)}`);\n        lines.push(...summarizeCapitulos(titulo.capitulos));\n    });\n    const summarizeDispos = (label, dispos)=>{\n        const items = dispos || [];\n        if (!items.length) return `${label}: 0`;\n        const sample = items.slice(0, 4).map((d)=>`${d.numero}(${d.anchor || \"-\"})`).join(\", \");\n        return `${label}: ${items.length} -> ${sample}${items.length > 4 ? \"…\" : \"\"}`;\n    };\n    lines.push(summarizeDispos(\"dispos.adicionales\", schema.disposiciones.adicionales));\n    lines.push(summarizeDispos(\"dispos.transitorias\", schema.disposiciones.transitorias));\n    lines.push(summarizeDispos(\"dispos.derogatorias\", schema.disposiciones.derogatorias));\n    lines.push(summarizeDispos(\"dispos.finales\", schema.disposiciones.finales));\n    return lines.join(\"\\n\");\n}\nfunction buildMentalOutlineChunkPrompt(params) {\n    const { source, schemaAcumulado, loteTexto, rangoPaginas, metadata } = params;\n    const schemaSummary = summarizeSchema(schemaAcumulado);\n    const rangeText = `[${rangoPaginas[0]}, ${rangoPaginas[1]}]`;\n    const tokens = loteTexto.split(/\\n+/);\n    const maxLines = 160;\n    const trimmedLote = tokens.length > maxLines ? tokens.slice(0, Math.floor(maxLines / 2)).join(\"\\n\") + \"\\n...\\n\" + tokens.slice(-Math.floor(maxLines / 2)).join(\"\\n\") : loteTexto;\n    const parts = [];\n    parts.push(\"Instrucci\\xf3n: Vas a procesar el documento por lotes/p\\xe1ginas y construir un esquema incremental sin duplicados.\");\n    parts.push(\"\");\n    parts.push(\"Contexto persistente (estado):\");\n    parts.push(\"\");\n    parts.push(\"Resumen del schema_acumulado:\");\n    parts.push(schemaSummary);\n    parts.push(\"\");\n    parts.push(\"metadata (usa estos valores en el objeto final):\");\n    parts.push(JSON.stringify(metadata, null, 2));\n    parts.push(\"\");\n    parts.push('heuristicas_saltos: { \"portadas_e_indices\": true }');\n    parts.push('normalizacion_numerales: { \"romanos\": true, \"ar\\xe1bigos\": true, \"preliminar\": true }');\n    parts.push(\"deteccion_bis_ter: true\");\n    parts.push(\"\");\n    parts.push(\"Paso actual:\");\n    parts.push(\"\");\n    parts.push('lote_texto: \"\"\"');\n    parts.push(trimmedLote);\n    parts.push('\"\"\"');\n    parts.push(`rango_paginas: ${rangeText}`);\n    parts.push(\"\");\n    parts.push(\"Tareas:\");\n    parts.push(\"- Ignora portadas/\\xedndices si aparecen.\");\n    parts.push(\"- Detecta encabezados T\\xedtulo/Cap\\xedtulo/Secci\\xf3n/Art\\xedculo y Disposiciones.\");\n    parts.push(\"- Fusiona con schema_acumulado sin crear duplicados (misma anchor o mismo encabezado normalizado).\");\n    parts.push(\"- Actualiza pages (extiende [min, max]).\");\n    parts.push(\"- Mant\\xe9n metadata igual salvo que se indique lo contrario.\");\n    parts.push(\"- No repitas art\\xedculos o disposiciones ya presentes; conserva los existentes y a\\xf1ade solo los nuevos.\");\n    parts.push(\"- En articulo_texto y texto_encabezado copia SOLO el encabezado literal (sin el cuerpo completo).\");\n    parts.push(\"- Devuelve el objeto completo conforme al JSON Schema (sin envolverlo en otras claves).\");\n    parts.push(\"- Si schema_acumulado es null, crea la estructura completa siguiendo el JSON Schema.\");\n    parts.push(\"- El objeto final debe contener exactamente las claves: metadata, front_matter, titulos, disposiciones.\");\n    parts.push(\"- Conserva los datos previos existentes y s\\xf3lo a\\xf1ade o ampl\\xeda la informaci\\xf3n detectada en este lote.\");\n    parts.push(\"\");\n    if (!schemaAcumulado) {\n        parts.push(\"JSON Schema objetivo:\");\n        parts.push(SCHEMA_STRING);\n        parts.push(\"\");\n    } else {\n        parts.push(\"Recuerda ce\\xf1irte al JSON Schema acordado (metadata, front_matter, titulos, disposiciones).\");\n        parts.push(\"\");\n    }\n    parts.push(HEURISTICS);\n    return parts.join(\"\\n\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTTNELElBQUksQ0FBQztJQUNYMkQsTUFBTTNELElBQUksQ0FBQztJQUNYMkQsTUFBTTNELElBQUksQ0FBQztJQUNYMkQsTUFBTTNELElBQUksQ0FBQztJQUNYMkQsTUFBTTNELElBQUksQ0FBQztJQUNYMkQsTUFBTTNELElBQUksQ0FBQztJQUNYMkQsTUFBTTNELElBQUksQ0FBQztJQUNYMkQsTUFBTTNELElBQUksQ0FBQ3dEO0lBQ1hHLE1BQU0zRCxJQUFJLENBQUM7SUFDWDJELE1BQU0zRCxJQUFJLENBQUMsQ0FBQyxlQUFlLEVBQUVvRCxVQUFVLENBQUM7SUFDeENPLE1BQU0zRCxJQUFJLENBQUM7SUFDWDJELE1BQU0zRCxJQUFJLENBQUM7SUFDWDJELE1BQU0zRCxJQUFJLENBQUM7SUFDWDJELE1BQU0zRCxJQUFJLENBQUM7SUFDWDJELE1BQU0zRCxJQUFJLENBQUM7SUFDWDJELE1BQU0zRCxJQUFJLENBQUM7SUFDWDJELE1BQU0zRCxJQUFJLENBQUM7SUFDWDJELE1BQU0zRCxJQUFJLENBQUM7SUFDWDJELE1BQU0zRCxJQUFJLENBQUM7SUFDWDJELE1BQU0zRCxJQUFJLENBQUM7SUFDWDJELE1BQU0zRCxJQUFJLENBQUM7SUFDWDJELE1BQU0zRCxJQUFJLENBQUM7SUFDWDJELE1BQU0zRCxJQUFJLENBQUM7SUFDWDJELE1BQU0zRCxJQUFJLENBQUM7SUFDWCxJQUFJLENBQUNnRCxpQkFBaUI7UUFDcEJXLE1BQU0zRCxJQUFJLENBQUM7UUFDWDJELE1BQU0zRCxJQUFJLENBQUNmO1FBQ1gwRSxNQUFNM0QsSUFBSSxDQUFDO0lBQ2IsT0FBTztRQUNMMkQsTUFBTTNELElBQUksQ0FBQztRQUNYMkQsTUFBTTNELElBQUksQ0FBQztJQUNiO0lBQ0EyRCxNQUFNM0QsSUFBSSxDQUFDWjtJQUVYLE9BQU91RSxNQUFNekQsSUFBSSxDQUFDO0FBQ3BCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZtLXVvYy1pYS8uL2xpYi9xYS9wcm9tcHRzTWVudGFsT3V0bGluZS50cz85YmEwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1lbnRhbE91dGxpbmVTY2hlbWEgfSBmcm9tICdAL2xpYi9zY2hlbWEvbWVudGFsT3V0bGluZSdcbmltcG9ydCB0eXBlIHsgTWVudGFsT3V0bGluZSwgVGl0dWxvLCBDYXBpdHVsbywgU2VjY2lvbiwgQXJ0aWN1bG8sIERpc3Bvc2ljaW9uSXRlbSB9IGZyb20gJ0AvdHlwZXMvbWVudGFsT3V0bGluZSdcblxudHlwZSBQYWdlc01hcEVudHJ5ID0ge1xuICBwYWdlOiBudW1iZXJcbiAgc3RhcnRfb2Zmc2V0OiBudW1iZXJcbiAgZW5kX29mZnNldDogbnVtYmVyXG59XG5cbmNvbnN0IFNDSEVNQV9TVFJJTkcgPSBKU09OLnN0cmluZ2lmeShtZW50YWxPdXRsaW5lU2NoZW1hLCBudWxsLCAyKVxuXG5jb25zdCBIRVVSSVNUSUNTID0gYEhldXLDrXN0aWNhcyByZWNvbWVuZGFkYXMgcGFyYSBsYSBlc3RydWN0dXJhY2nDs246XG4tIFTDrXR1bG86IF4oVFtJw41dVFVMTyg/OlxcXFxzK1BSRUxJTUlOQVJ8XFxcXHMrW0lWWExDRE1dK3xcXFxccytcXFxcZCspKVxcXFxiLipcbi0gQ2Fww610dWxvOiBeQ0FQW0nDjV1UVUxPXFxcXHMrKD86W0lWWExDRE1dK3xcXFxcZCspXFxcXGIuKlxuLSBTZWNjacOzbjogXlNFQ0NJW8OTT11OXFxcXHMrKD86W0lWWExDRE1dK3xcXFxcZCspXFxcXGIuKlxuLSBBcnTDrWN1bG86IF5BcnRbacOtXWN1bG9cXFxccysoXFxcXGQrKD86XFxcXHMqKD86YmlzfHRlcnxxdWF0ZXJ8cXVpbnF1aWVzKSk/KVxcXFwuP1xcXFxzKiguKikkXG4tIERpc3Bvc2ljacOzbiBhZGljaW9uYWw6IF5EaXNwb3NpY2lbw7NvXW5cXFxccytBZGljaW9uYWxcXFxccysoXFxcXGQrfFtVdV1uaWNhKVxcXFxiLipcbi0gRGlzcG9zaWNpw7NuIHRyYW5zaXRvcmlhOiBeRGlzcG9zaWNpW8Ozb11uXFxcXHMrVHJhbnNpdG9yaWFcXFxccysoXFxcXGQrfFtVdV1uaWNhKVxcXFxiLipcbi0gRGlzcG9zaWNpw7NuIGRlcm9nYXRvcmlhOiBeRGlzcG9zaWNpW8Ozb11uXFxcXHMrRGVyb2dhdG9yaWFcXFxccysoXFxcXGQrfFtVdV1uaWNhKVxcXFxiLipcbi0gRGlzcG9zaWNpw7NuIGZpbmFsOiBeRGlzcG9zaWNpW8Ozb11uXFxcXHMrRmluYWxcXFxccysoXFxcXGQrfFtVdV1uaWNhKVxcXFxiLipcbi0gUHJlw6FtYnVsbyAvIEV4cG9zaWNpw7NuOiBeKFByZVvDoWFdbWJ1bG98RXhwb3NpY2lbw7NvXW5cXFxccytkZVxcXFxzK21vdGl2b3MpXFxcXGIuKlxuXG5JZ25vcmEgcG9ydGFkYXMgZSDDrW5kaWNlcyBjdWFuZG8gY29udGVuZ2FuIFBvcnRhZGEsIENyw6lkaXRvcywgRGVww7NzaXRvIGxlZ2FsLCBJU0JOLCDDjW5kaWNlLCBTdW1hcmlvLCBUYWJsYSBkZSBjb250ZW5pZG8sIENvbnRlbnRzIG8gU3VtbWFyeS5cbk5vcm1hbGl6YSBvcmRpbmFsZXMgKFBSRUxJTUlOQVIsIEkvSUnigKYsIG7Dum1lcm9zIGFyw6FiaWdvcykgeSBjb25zZXJ2YSBlbCBlbmNhYmV6YWRvIGxpdGVyYWwgZW4gKl90ZXh0by5cbkNhcHR1cmEgYXJ0w61jdWxvcyBjb24gc3VmaWpvIChiaXMvdGVyL+KApikgeSBjb2xvY2EgZWwgZW5jYWJlemFkbyBlbiBhcnRpY3Vsb190ZXh0by5cbkV2aXRhIGR1cGxpY2Fkb3MgdXNhbmRvIGFuY2hvciBvIGVuY2FiZXphZG8gbm9ybWFsaXphZG8geSBleHRpZW5kZSBwYWdlcyBjb21vIFttaW4sIG1heF0uYFxuXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRNZW50YWxPdXRsaW5lUHJvbXB0KHBhcmFtczoge1xuICBzb3VyY2U6IHN0cmluZ1xuICB0ZXh0OiBzdHJpbmdcbiAgcGFnZXNNYXA/OiBQYWdlc01hcEVudHJ5W11cbn0pIHtcbiAgY29uc3QgeyBzb3VyY2UsIHRleHQsIHBhZ2VzTWFwIH0gPSBwYXJhbXNcbiAgY29uc3Qgc2FmZVNvdXJjZSA9IHNvdXJjZSB8fCAnRG9jdW1lbnRvIHNpbiB0w610dWxvJ1xuICBjb25zdCB0cmltbWVkVGV4dCA9IHRleHQudHJpbSgpXG4gIGNvbnN0IHNlZ21lbnRzOiBzdHJpbmdbXSA9IFtdXG4gIGNvbnN0IGVzY2FwZWRTb3VyY2UgPSBzYWZlU291cmNlLnJlcGxhY2UoL1wiL2csICdcXFxcXCInKVxuICBzZWdtZW50cy5wdXNoKGBzb3VyY2U6IFwiJHtlc2NhcGVkU291cmNlfVwiYClcbiAgc2VnbWVudHMucHVzaChgdGV4dDogXCJcIlwiXG4ke3RyaW1tZWRUZXh0fVxuXCJcIlwiYClcbiAgaWYgKHBhZ2VzTWFwICYmIHBhZ2VzTWFwLmxlbmd0aCkge1xuICAgIHNlZ21lbnRzLnB1c2goYHBhZ2VzX21hcDogJHtKU09OLnN0cmluZ2lmeShwYWdlc01hcCl9YClcbiAgfVxuXG4gIHJldHVybiBgR2VuZXJhIGVsIGVzcXVlbWEgZXN0cnVjdHVyYWRvIGRlbCBzaWd1aWVudGUgZG9jdW1lbnRvIGxlZ2FsLlxuLSBFbGltaW5hIHBvcnRhZGFzIGUgw61uZGljZXMuXG4tIEVzdHJ1Y3R1cmE6IFTDrXR1bG8g4oaSIChDYXDDrXR1bG8pIOKGkiAoU2VjY2nDs24pIOKGkiBBcnTDrWN1bG8sIG3DoXMgRGlzcG9zaWNpb25lcyAoYWRpY2lvbmFsZXMsIHRyYW5zaXRvcmlhcywgZGVyb2dhdG9yaWFzLCBmaW5hbGVzKS5cbi0gUmVzcGV0YSBudW1lcmFjaW9uZXMgcmVhbGVzIChpbmNsdXllIGJpcy90ZXIpLlxuLSBEZXZ1ZWx2ZSBzb2xvIEpTT04gY29uZm9ybWUgYWwgSlNPTiBTY2hlbWEgcHJvcG9yY2lvbmFkby5cblxuSlNPTiBTY2hlbWEgb2JqZXRpdm86XG4ke1NDSEVNQV9TVFJJTkd9XG5cbiR7SEVVUklTVElDU31cblxuJHtzZWdtZW50cy5qb2luKCdcXG5cXG4nKX1gXG59XG5cbmZ1bmN0aW9uIHN1bW1hcml6ZVNjaGVtYShzY2hlbWE6IE1lbnRhbE91dGxpbmUgfCBudWxsKSB7XG4gIGlmICghc2NoZW1hKSByZXR1cm4gJ251bGwnXG5cbiAgY29uc3QgZm10UGFnZXMgPSAocGFnZXM/OiBudW1iZXJbXSB8IG51bGwpID0+IHtcbiAgICBpZiAoIXBhZ2VzIHx8ICFwYWdlcy5sZW5ndGgpIHJldHVybiAn4oiFJ1xuICAgIGlmIChwYWdlcy5sZW5ndGggPT09IDEpIHJldHVybiBgWyR7cGFnZXNbMF19XWBcbiAgICByZXR1cm4gYFske3BhZ2VzWzBdfS0ke3BhZ2VzW3BhZ2VzLmxlbmd0aCAtIDFdfV1gXG4gIH1cblxuICBjb25zdCBzdW1tYXJpemVBcnRpY3Vsb3MgPSAoYXJ0aWN1bG9zPzogQXJ0aWN1bG9bXSkgPT4ge1xuICAgIGNvbnN0IGl0ZW1zID0gYXJ0aWN1bG9zIHx8IFtdXG4gICAgaWYgKCFpdGVtcy5sZW5ndGgpIHJldHVybiAnYXJ0OjAnXG4gICAgY29uc3Qgc2FtcGxlID0gaXRlbXMuc2xpY2UoMCwgMykubWFwKChhKSA9PiBhLm51bWVybykuam9pbignLCAnKVxuICAgIGNvbnN0IHN1ZmZpeCA9IGl0ZW1zLmxlbmd0aCA+IDMgPyBgIOKApiAoJHtpdGVtcy5sZW5ndGh9KWAgOiBgICgke2l0ZW1zLmxlbmd0aH0pYFxuICAgIHJldHVybiBgYXJ0OiR7c2FtcGxlfSR7c3VmZml4fWBcbiAgfVxuXG4gIGNvbnN0IHN1bW1hcml6ZVNlY2Npb25lcyA9IChzZWNjaW9uZXM/OiBTZWNjaW9uW10pID0+IHtcbiAgICBjb25zdCBpdGVtcyA9IHNlY2Npb25lcyB8fCBbXVxuICAgIGlmICghaXRlbXMubGVuZ3RoKSByZXR1cm4gW11cbiAgICByZXR1cm4gaXRlbXMuc2xpY2UoMCwgNCkubWFwKChzZWMpID0+IHtcbiAgICAgIGNvbnN0IGFydFN1bW1hcnkgPSBzdW1tYXJpemVBcnRpY3Vsb3Moc2VjLmFydGljdWxvcylcbiAgICAgIHJldHVybiBgICAgIMK3IFNlYyAke3NlYy5vcmRpbmFsIHx8ICc/J30gKCR7c2VjLmFuY2hvciB8fCAnLSd9KSAke2ZtdFBhZ2VzKHNlYy5wYWdlcyl9ICR7YXJ0U3VtbWFyeX1gXG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0IHN1bW1hcml6ZUNhcGl0dWxvcyA9IChjYXBpdHVsb3M/OiBDYXBpdHVsb1tdKSA9PiB7XG4gICAgY29uc3QgaXRlbXMgPSBjYXBpdHVsb3MgfHwgW11cbiAgICBpZiAoIWl0ZW1zLmxlbmd0aCkgcmV0dXJuIFtdXG4gICAgcmV0dXJuIGl0ZW1zLnNsaWNlKDAsIDYpLmZsYXRNYXAoKGNhcCkgPT4ge1xuICAgICAgY29uc3QgbGluZXMgPSBbYCAgwrcgQ2FwICR7Y2FwLm9yZGluYWwgfHwgJz8nfSAoJHtjYXAuYW5jaG9yIHx8ICctJ30pICR7Zm10UGFnZXMoY2FwLnBhZ2VzKX0gc2VjOiR7Y2FwLnNlY2Npb25lcz8ubGVuZ3RoIHx8IDB9ICR7c3VtbWFyaXplQXJ0aWN1bG9zKGNhcC5hcnRpY3Vsb3MpfWBdXG4gICAgICBsaW5lcy5wdXNoKC4uLnN1bW1hcml6ZVNlY2Npb25lcyhjYXAuc2VjY2lvbmVzKSlcbiAgICAgIHJldHVybiBsaW5lc1xuICAgIH0pXG4gIH1cblxuICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXVxuICBsaW5lcy5wdXNoKGBtZXRhZGF0YTogXCIke3NjaGVtYS5tZXRhZGF0YS5kb2N1bWVudF90aXRsZX1cIiB8IHNvdXJjZTogXCIke3NjaGVtYS5tZXRhZGF0YS5zb3VyY2V9XCIgfCBsYW5nOiAke3NjaGVtYS5tZXRhZGF0YS5sYW5ndWFnZX0gfCBnZW5lcmF0ZWRfYXQ6ICR7c2NoZW1hLm1ldGFkYXRhLmdlbmVyYXRlZF9hdH1gKVxuICBsaW5lcy5wdXNoKGBmcm9udF9tYXR0ZXI6IHByZWFtYnVsbz0ke3NjaGVtYS5mcm9udF9tYXR0ZXIucHJlYW1idWxvLnByZXNlbnR9ICR7Zm10UGFnZXMoc2NoZW1hLmZyb250X21hdHRlci5wcmVhbWJ1bG8ucGFnZXMpfSB8IGV4cG9zaWNpb249JHtzY2hlbWEuZnJvbnRfbWF0dGVyLmV4cG9zaWNpb25fbW90aXZvcy5wcmVzZW50fSAke2ZtdFBhZ2VzKHNjaGVtYS5mcm9udF9tYXR0ZXIuZXhwb3NpY2lvbl9tb3Rpdm9zLnBhZ2VzKX1gKVxuICBsaW5lcy5wdXNoKGB0aXR1bG9zOiAke3NjaGVtYS50aXR1bG9zLmxlbmd0aH1gKVxuXG4gIHNjaGVtYS50aXR1bG9zLnNsaWNlKDAsIDEyKS5mb3JFYWNoKCh0aXR1bG86IFRpdHVsbykgPT4ge1xuICAgIGxpbmVzLnB1c2goYC0gVMOtdHVsbyAke3RpdHVsby5vcmRpbmFsIHx8ICc/J30gKCR7dGl0dWxvLmFuY2hvciB8fCAnLSd9KSAke2ZtdFBhZ2VzKHRpdHVsby5wYWdlcyl9IGNhcDoke3RpdHVsby5jYXBpdHVsb3M/Lmxlbmd0aCB8fCAwfSAke3N1bW1hcml6ZUFydGljdWxvcyh0aXR1bG8uYXJ0aWN1bG9zKX1gKVxuICAgIGxpbmVzLnB1c2goLi4uc3VtbWFyaXplQ2FwaXR1bG9zKHRpdHVsby5jYXBpdHVsb3MpKVxuICB9KVxuXG4gIGNvbnN0IHN1bW1hcml6ZURpc3BvcyA9IChsYWJlbDogc3RyaW5nLCBkaXNwb3M/OiBEaXNwb3NpY2lvbkl0ZW1bXSkgPT4ge1xuICAgIGNvbnN0IGl0ZW1zID0gZGlzcG9zIHx8IFtdXG4gICAgaWYgKCFpdGVtcy5sZW5ndGgpIHJldHVybiBgJHtsYWJlbH06IDBgXG4gICAgY29uc3Qgc2FtcGxlID0gaXRlbXMuc2xpY2UoMCwgNCkubWFwKChkKSA9PiBgJHtkLm51bWVyb30oJHtkLmFuY2hvciB8fCAnLSd9KWApLmpvaW4oJywgJylcbiAgICByZXR1cm4gYCR7bGFiZWx9OiAke2l0ZW1zLmxlbmd0aH0gLT4gJHtzYW1wbGV9JHtpdGVtcy5sZW5ndGggPiA0ID8gJ+KApicgOiAnJ31gXG4gIH1cblxuICBsaW5lcy5wdXNoKHN1bW1hcml6ZURpc3BvcygnZGlzcG9zLmFkaWNpb25hbGVzJywgc2NoZW1hLmRpc3Bvc2ljaW9uZXMuYWRpY2lvbmFsZXMpKVxuICBsaW5lcy5wdXNoKHN1bW1hcml6ZURpc3BvcygnZGlzcG9zLnRyYW5zaXRvcmlhcycsIHNjaGVtYS5kaXNwb3NpY2lvbmVzLnRyYW5zaXRvcmlhcykpXG4gIGxpbmVzLnB1c2goc3VtbWFyaXplRGlzcG9zKCdkaXNwb3MuZGVyb2dhdG9yaWFzJywgc2NoZW1hLmRpc3Bvc2ljaW9uZXMuZGVyb2dhdG9yaWFzKSlcbiAgbGluZXMucHVzaChzdW1tYXJpemVEaXNwb3MoJ2Rpc3Bvcy5maW5hbGVzJywgc2NoZW1hLmRpc3Bvc2ljaW9uZXMuZmluYWxlcykpXG5cbiAgcmV0dXJuIGxpbmVzLmpvaW4oJ1xcbicpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZE1lbnRhbE91dGxpbmVDaHVua1Byb21wdChwYXJhbXM6IHtcbiAgc291cmNlOiBzdHJpbmdcbiAgc2NoZW1hQWN1bXVsYWRvOiBhbnlcbiAgbG90ZVRleHRvOiBzdHJpbmdcbiAgcmFuZ29QYWdpbmFzOiBbbnVtYmVyLCBudW1iZXJdXG4gIG1ldGFkYXRhOiB7XG4gICAgZG9jdW1lbnRfdGl0bGU6IHN0cmluZ1xuICAgIHNvdXJjZTogc3RyaW5nXG4gICAgbGFuZ3VhZ2U6IHN0cmluZ1xuICAgIGdlbmVyYXRlZF9hdDogc3RyaW5nXG4gIH1cbn0pIHtcbiAgY29uc3QgeyBzb3VyY2UsIHNjaGVtYUFjdW11bGFkbywgbG90ZVRleHRvLCByYW5nb1BhZ2luYXMsIG1ldGFkYXRhIH0gPSBwYXJhbXNcbiAgY29uc3Qgc2NoZW1hU3VtbWFyeSA9IHN1bW1hcml6ZVNjaGVtYShzY2hlbWFBY3VtdWxhZG8gYXMgTWVudGFsT3V0bGluZSB8IG51bGwpXG4gIGNvbnN0IHJhbmdlVGV4dCA9IGBbJHtyYW5nb1BhZ2luYXNbMF19LCAke3JhbmdvUGFnaW5hc1sxXX1dYFxuICBjb25zdCB0b2tlbnMgPSBsb3RlVGV4dG8uc3BsaXQoL1xcbisvKVxuICBjb25zdCBtYXhMaW5lcyA9IDE2MFxuICBjb25zdCB0cmltbWVkTG90ZSA9IHRva2Vucy5sZW5ndGggPiBtYXhMaW5lc1xuICAgID8gdG9rZW5zLnNsaWNlKDAsIE1hdGguZmxvb3IobWF4TGluZXMgLyAyKSkuam9pbignXFxuJykgKyAnXFxuLi4uXFxuJyArIHRva2Vucy5zbGljZSgtTWF0aC5mbG9vcihtYXhMaW5lcyAvIDIpKS5qb2luKCdcXG4nKVxuICAgIDogbG90ZVRleHRvXG5cbiAgY29uc3QgcGFydHM6IHN0cmluZ1tdID0gW11cbiAgcGFydHMucHVzaCgnSW5zdHJ1Y2Npw7NuOiBWYXMgYSBwcm9jZXNhciBlbCBkb2N1bWVudG8gcG9yIGxvdGVzL3DDoWdpbmFzIHkgY29uc3RydWlyIHVuIGVzcXVlbWEgaW5jcmVtZW50YWwgc2luIGR1cGxpY2Fkb3MuJylcbiAgcGFydHMucHVzaCgnJylcbiAgcGFydHMucHVzaCgnQ29udGV4dG8gcGVyc2lzdGVudGUgKGVzdGFkbyk6JylcbiAgcGFydHMucHVzaCgnJylcbiAgcGFydHMucHVzaCgnUmVzdW1lbiBkZWwgc2NoZW1hX2FjdW11bGFkbzonKVxuICBwYXJ0cy5wdXNoKHNjaGVtYVN1bW1hcnkpXG4gIHBhcnRzLnB1c2goJycpXG4gIHBhcnRzLnB1c2goJ21ldGFkYXRhICh1c2EgZXN0b3MgdmFsb3JlcyBlbiBlbCBvYmpldG8gZmluYWwpOicpXG4gIHBhcnRzLnB1c2goSlNPTi5zdHJpbmdpZnkobWV0YWRhdGEsIG51bGwsIDIpKVxuICBwYXJ0cy5wdXNoKCcnKVxuICBwYXJ0cy5wdXNoKCdoZXVyaXN0aWNhc19zYWx0b3M6IHsgXCJwb3J0YWRhc19lX2luZGljZXNcIjogdHJ1ZSB9JylcbiAgcGFydHMucHVzaCgnbm9ybWFsaXphY2lvbl9udW1lcmFsZXM6IHsgXCJyb21hbm9zXCI6IHRydWUsIFwiYXLDoWJpZ29zXCI6IHRydWUsIFwicHJlbGltaW5hclwiOiB0cnVlIH0nKVxuICBwYXJ0cy5wdXNoKCdkZXRlY2Npb25fYmlzX3RlcjogdHJ1ZScpXG4gIHBhcnRzLnB1c2goJycpXG4gIHBhcnRzLnB1c2goJ1Bhc28gYWN0dWFsOicpXG4gIHBhcnRzLnB1c2goJycpXG4gIHBhcnRzLnB1c2goJ2xvdGVfdGV4dG86IFwiXCJcIicpXG4gIHBhcnRzLnB1c2godHJpbW1lZExvdGUpXG4gIHBhcnRzLnB1c2goJ1wiXCJcIicpXG4gIHBhcnRzLnB1c2goYHJhbmdvX3BhZ2luYXM6ICR7cmFuZ2VUZXh0fWApXG4gIHBhcnRzLnB1c2goJycpXG4gIHBhcnRzLnB1c2goJ1RhcmVhczonKVxuICBwYXJ0cy5wdXNoKCctIElnbm9yYSBwb3J0YWRhcy/DrW5kaWNlcyBzaSBhcGFyZWNlbi4nKVxuICBwYXJ0cy5wdXNoKCctIERldGVjdGEgZW5jYWJlemFkb3MgVMOtdHVsby9DYXDDrXR1bG8vU2VjY2nDs24vQXJ0w61jdWxvIHkgRGlzcG9zaWNpb25lcy4nKVxuICBwYXJ0cy5wdXNoKCctIEZ1c2lvbmEgY29uIHNjaGVtYV9hY3VtdWxhZG8gc2luIGNyZWFyIGR1cGxpY2Fkb3MgKG1pc21hIGFuY2hvciBvIG1pc21vIGVuY2FiZXphZG8gbm9ybWFsaXphZG8pLicpXG4gIHBhcnRzLnB1c2goJy0gQWN0dWFsaXphIHBhZ2VzIChleHRpZW5kZSBbbWluLCBtYXhdKS4nKVxuICBwYXJ0cy5wdXNoKCctIE1hbnTDqW4gbWV0YWRhdGEgaWd1YWwgc2Fsdm8gcXVlIHNlIGluZGlxdWUgbG8gY29udHJhcmlvLicpXG4gIHBhcnRzLnB1c2goJy0gTm8gcmVwaXRhcyBhcnTDrWN1bG9zIG8gZGlzcG9zaWNpb25lcyB5YSBwcmVzZW50ZXM7IGNvbnNlcnZhIGxvcyBleGlzdGVudGVzIHkgYcOxYWRlIHNvbG8gbG9zIG51ZXZvcy4nKVxuICBwYXJ0cy5wdXNoKCctIEVuIGFydGljdWxvX3RleHRvIHkgdGV4dG9fZW5jYWJlemFkbyBjb3BpYSBTT0xPIGVsIGVuY2FiZXphZG8gbGl0ZXJhbCAoc2luIGVsIGN1ZXJwbyBjb21wbGV0bykuJylcbiAgcGFydHMucHVzaCgnLSBEZXZ1ZWx2ZSBlbCBvYmpldG8gY29tcGxldG8gY29uZm9ybWUgYWwgSlNPTiBTY2hlbWEgKHNpbiBlbnZvbHZlcmxvIGVuIG90cmFzIGNsYXZlcykuJylcbiAgcGFydHMucHVzaCgnLSBTaSBzY2hlbWFfYWN1bXVsYWRvIGVzIG51bGwsIGNyZWEgbGEgZXN0cnVjdHVyYSBjb21wbGV0YSBzaWd1aWVuZG8gZWwgSlNPTiBTY2hlbWEuJylcbiAgcGFydHMucHVzaCgnLSBFbCBvYmpldG8gZmluYWwgZGViZSBjb250ZW5lciBleGFjdGFtZW50ZSBsYXMgY2xhdmVzOiBtZXRhZGF0YSwgZnJvbnRfbWF0dGVyLCB0aXR1bG9zLCBkaXNwb3NpY2lvbmVzLicpXG4gIHBhcnRzLnB1c2goJy0gQ29uc2VydmEgbG9zIGRhdG9zIHByZXZpb3MgZXhpc3RlbnRlcyB5IHPDs2xvIGHDsWFkZSBvIGFtcGzDrWEgbGEgaW5mb3JtYWNpw7NuIGRldGVjdGFkYSBlbiBlc3RlIGxvdGUuJylcbiAgcGFydHMucHVzaCgnJylcbiAgaWYgKCFzY2hlbWFBY3VtdWxhZG8pIHtcbiAgICBwYXJ0cy5wdXNoKCdKU09OIFNjaGVtYSBvYmpldGl2bzonKVxuICAgIHBhcnRzLnB1c2goU0NIRU1BX1NUUklORylcbiAgICBwYXJ0cy5wdXNoKCcnKVxuICB9IGVsc2Uge1xuICAgIHBhcnRzLnB1c2goJ1JlY3VlcmRhIGNlw7FpcnRlIGFsIEpTT04gU2NoZW1hIGFjb3JkYWRvIChtZXRhZGF0YSwgZnJvbnRfbWF0dGVyLCB0aXR1bG9zLCBkaXNwb3NpY2lvbmVzKS4nKVxuICAgIHBhcnRzLnB1c2goJycpXG4gIH1cbiAgcGFydHMucHVzaChIRVVSSVNUSUNTKVxuXG4gIHJldHVybiBwYXJ0cy5qb2luKCdcXG4nKVxufVxuXG4iXSwibmFtZXMiOlsibWVudGFsT3V0bGluZVNjaGVtYSIsIlNDSEVNQV9TVFJJTkciLCJKU09OIiwic3RyaW5naWZ5IiwiSEVVUklTVElDUyIsImJ1aWxkTWVudGFsT3V0bGluZVByb21wdCIsInBhcmFtcyIsInNvdXJjZSIsInRleHQiLCJwYWdlc01hcCIsInNhZmVTb3VyY2UiLCJ0cmltbWVkVGV4dCIsInRyaW0iLCJzZWdtZW50cyIsImVzY2FwZWRTb3VyY2UiLCJyZXBsYWNlIiwicHVzaCIsImxlbmd0aCIsImpvaW4iLCJzdW1tYXJpemVTY2hlbWEiLCJzY2hlbWEiLCJmbXRQYWdlcyIsInBhZ2VzIiwic3VtbWFyaXplQXJ0aWN1bG9zIiwiYXJ0aWN1bG9zIiwiaXRlbXMiLCJzYW1wbGUiLCJzbGljZSIsIm1hcCIsImEiLCJudW1lcm8iLCJzdWZmaXgiLCJzdW1tYXJpemVTZWNjaW9uZXMiLCJzZWNjaW9uZXMiLCJzZWMiLCJhcnRTdW1tYXJ5Iiwib3JkaW5hbCIsImFuY2hvciIsInN1bW1hcml6ZUNhcGl0dWxvcyIsImNhcGl0dWxvcyIsImZsYXRNYXAiLCJjYXAiLCJsaW5lcyIsIm1ldGFkYXRhIiwiZG9jdW1lbnRfdGl0bGUiLCJsYW5ndWFnZSIsImdlbmVyYXRlZF9hdCIsImZyb250X21hdHRlciIsInByZWFtYnVsbyIsInByZXNlbnQiLCJleHBvc2ljaW9uX21vdGl2b3MiLCJ0aXR1bG9zIiwiZm9yRWFjaCIsInRpdHVsbyIsInN1bW1hcml6ZURpc3BvcyIsImxhYmVsIiwiZGlzcG9zIiwiZCIsImRpc3Bvc2ljaW9uZXMiLCJhZGljaW9uYWxlcyIsInRyYW5zaXRvcmlhcyIsImRlcm9nYXRvcmlhcyIsImZpbmFsZXMiLCJidWlsZE1lbnRhbE91dGxpbmVDaHVua1Byb21wdCIsInNjaGVtYUFjdW11bGFkbyIsImxvdGVUZXh0byIsInJhbmdvUGFnaW5hcyIsInNjaGVtYVN1bW1hcnkiLCJyYW5nZVRleHQiLCJ0b2tlbnMiLCJzcGxpdCIsIm1heExpbmVzIiwidHJpbW1lZExvdGUiLCJNYXRoIiwiZmxvb3IiLCJwYXJ0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/qa/promptsMentalOutline.ts\n");

/***/ }),

/***/ "(rsc)/./lib/schema/mentalOutline.ts":
/*!*************************************!*\
  !*** ./lib/schema/mentalOutline.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   mentalOutlineSchema: () => (/* binding */ mentalOutlineSchema)\n/* harmony export */ });\nconst mentalOutlineSchema = {\n    $schema: \"https://json-schema.org/draft/2020-12/schema\",\n    $id: \"https://tfm-uoc-ia/schemas/mental-outline.json\",\n    type: \"object\",\n    required: [\n        \"metadata\",\n        \"front_matter\",\n        \"titulos\",\n        \"disposiciones\"\n    ],\n    additionalProperties: false,\n    properties: {\n        metadata: {\n            type: \"object\",\n            required: [\n                \"document_title\",\n                \"source\",\n                \"language\",\n                \"generated_at\"\n            ],\n            additionalProperties: false,\n            properties: {\n                document_title: {\n                    type: \"string\",\n                    minLength: 1\n                },\n                source: {\n                    type: \"string\",\n                    minLength: 1\n                },\n                language: {\n                    type: \"string\",\n                    const: \"es\"\n                },\n                generated_at: {\n                    type: \"string\",\n                    format: \"date\"\n                }\n            }\n        },\n        front_matter: {\n            type: \"object\",\n            required: [\n                \"preambulo\",\n                \"exposicion_motivos\"\n            ],\n            additionalProperties: false,\n            properties: {\n                preambulo: {\n                    $ref: \"#/$defs/frontMatterEntry\"\n                },\n                exposicion_motivos: {\n                    $ref: \"#/$defs/frontMatterEntry\"\n                }\n            }\n        },\n        titulos: {\n            type: \"array\",\n            items: {\n                $ref: \"#/$defs/titulo\"\n            }\n        },\n        disposiciones: {\n            type: \"object\",\n            required: [\n                \"adicionales\",\n                \"transitorias\",\n                \"derogatorias\",\n                \"finales\"\n            ],\n            additionalProperties: false,\n            properties: {\n                adicionales: {\n                    type: \"array\",\n                    items: {\n                        $ref: \"#/$defs/disposicionItem\"\n                    }\n                },\n                transitorias: {\n                    type: \"array\",\n                    items: {\n                        $ref: \"#/$defs/disposicionItem\"\n                    }\n                },\n                derogatorias: {\n                    type: \"array\",\n                    items: {\n                        $ref: \"#/$defs/disposicionItem\"\n                    }\n                },\n                finales: {\n                    type: \"array\",\n                    items: {\n                        $ref: \"#/$defs/disposicionItem\"\n                    }\n                }\n            }\n        }\n    },\n    $defs: {\n        frontMatterEntry: {\n            type: \"object\",\n            required: [\n                \"present\",\n                \"anchor\",\n                \"pages\"\n            ],\n            additionalProperties: false,\n            properties: {\n                present: {\n                    type: \"boolean\"\n                },\n                anchor: {\n                    type: [\n                        \"string\",\n                        \"null\"\n                    ]\n                },\n                pages: {\n                    anyOf: [\n                        {\n                            type: \"null\"\n                        },\n                        {\n                            type: \"array\",\n                            items: {\n                                type: \"integer\",\n                                minimum: 1\n                            },\n                            minItems: 1,\n                            maxItems: 2\n                        }\n                    ]\n                }\n            }\n        },\n        titulo: {\n            type: \"object\",\n            required: [\n                \"ordinal\",\n                \"titulo_texto\",\n                \"anchor\",\n                \"pages\",\n                \"capitulos\",\n                \"articulos\"\n            ],\n            additionalProperties: false,\n            properties: {\n                ordinal: {\n                    type: \"string\",\n                    minLength: 1\n                },\n                titulo_texto: {\n                    type: \"string\",\n                    minLength: 1\n                },\n                anchor: {\n                    type: \"string\",\n                    minLength: 1\n                },\n                pages: {\n                    $ref: \"#/$defs/pageRange\"\n                },\n                capitulos: {\n                    type: \"array\",\n                    items: {\n                        $ref: \"#/$defs/capitulo\"\n                    }\n                },\n                articulos: {\n                    type: \"array\",\n                    items: {\n                        $ref: \"#/$defs/articulo\"\n                    }\n                }\n            }\n        },\n        capitulo: {\n            type: \"object\",\n            required: [\n                \"ordinal\",\n                \"capitulo_texto\",\n                \"anchor\",\n                \"pages\",\n                \"secciones\",\n                \"articulos\"\n            ],\n            additionalProperties: false,\n            properties: {\n                ordinal: {\n                    type: \"string\",\n                    minLength: 1\n                },\n                capitulo_texto: {\n                    type: \"string\",\n                    minLength: 1\n                },\n                anchor: {\n                    type: \"string\",\n                    minLength: 1\n                },\n                pages: {\n                    $ref: \"#/$defs/pageRange\"\n                },\n                secciones: {\n                    type: \"array\",\n                    items: {\n                        $ref: \"#/$defs/seccion\"\n                    }\n                },\n                articulos: {\n                    type: \"array\",\n                    items: {\n                        $ref: \"#/$defs/articulo\"\n                    }\n                }\n            }\n        },\n        seccion: {\n            type: \"object\",\n            required: [\n                \"ordinal\",\n                \"seccion_texto\",\n                \"anchor\",\n                \"pages\",\n                \"articulos\"\n            ],\n            additionalProperties: false,\n            properties: {\n                ordinal: {\n                    type: \"string\",\n                    minLength: 1\n                },\n                seccion_texto: {\n                    type: \"string\",\n                    minLength: 1\n                },\n                anchor: {\n                    type: \"string\",\n                    minLength: 1\n                },\n                pages: {\n                    $ref: \"#/$defs/pageRange\"\n                },\n                articulos: {\n                    type: \"array\",\n                    items: {\n                        $ref: \"#/$defs/articulo\"\n                    }\n                }\n            }\n        },\n        articulo: {\n            type: \"object\",\n            required: [\n                \"numero\",\n                \"articulo_texto\",\n                \"anchor\",\n                \"pages\"\n            ],\n            additionalProperties: false,\n            properties: {\n                numero: {\n                    type: \"string\",\n                    minLength: 1\n                },\n                articulo_texto: {\n                    type: \"string\",\n                    minLength: 1\n                },\n                anchor: {\n                    type: \"string\",\n                    minLength: 1\n                },\n                pages: {\n                    $ref: \"#/$defs/pageRange\"\n                }\n            }\n        },\n        disposicionItem: {\n            type: \"object\",\n            required: [\n                \"numero\",\n                \"texto_encabezado\",\n                \"anchor\",\n                \"pages\"\n            ],\n            additionalProperties: false,\n            properties: {\n                numero: {\n                    type: \"string\",\n                    minLength: 1\n                },\n                texto_encabezado: {\n                    type: \"string\",\n                    minLength: 1\n                },\n                anchor: {\n                    type: \"string\",\n                    minLength: 1\n                },\n                pages: {\n                    $ref: \"#/$defs/pageRange\"\n                }\n            }\n        },\n        pageRange: {\n            type: \"array\",\n            items: {\n                type: \"integer\",\n                minimum: 1\n            },\n            minItems: 0\n        }\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFBRTVDLE1BQU07b0JBQVVNLFdBQVc7Z0JBQUU7Z0JBQy9Db0IsUUFBUTtvQkFBRTFCLE1BQU07b0JBQVVNLFdBQVc7Z0JBQUU7Z0JBQ3ZDcUIsT0FBTztvQkFBRWIsTUFBTTtnQkFBb0I7WUFDckM7UUFDRjtRQUNBK0IsaUJBQWlCO1lBQ2Y3QyxNQUFNO1lBQ05DLFVBQVU7Z0JBQUM7Z0JBQVU7Z0JBQW9CO2dCQUFVO2FBQVE7WUFDM0RDLHNCQUFzQjtZQUN0QkMsWUFBWTtnQkFDVndDLFFBQVE7b0JBQUUzQyxNQUFNO29CQUFVTSxXQUFXO2dCQUFFO2dCQUN2Q3dDLGtCQUFrQjtvQkFBRTlDLE1BQU07b0JBQVVNLFdBQVc7Z0JBQUU7Z0JBQ2pEb0IsUUFBUTtvQkFBRTFCLE1BQU07b0JBQVVNLFdBQVc7Z0JBQUU7Z0JBQ3ZDcUIsT0FBTztvQkFBRWIsTUFBTTtnQkFBb0I7WUFDckM7UUFDRjtRQUNBaUMsV0FBVztZQUNUL0MsTUFBTTtZQUNOaUIsT0FBTztnQkFBRWpCLE1BQU07Z0JBQVc2QixTQUFTO1lBQUU7WUFDckNDLFVBQVU7UUFDWjtJQUNGO0FBQ0YsRUFBVSIsInNvdXJjZXMiOlsid2VicGFjazovL3RmbS11b2MtaWEvLi9saWIvc2NoZW1hL21lbnRhbE91dGxpbmUudHM/NzAyYSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgbWVudGFsT3V0bGluZVNjaGVtYSA9IHtcclxuICAkc2NoZW1hOiAnaHR0cHM6Ly9qc29uLXNjaGVtYS5vcmcvZHJhZnQvMjAyMC0xMi9zY2hlbWEnLFxyXG4gICRpZDogJ2h0dHBzOi8vdGZtLXVvYy1pYS9zY2hlbWFzL21lbnRhbC1vdXRsaW5lLmpzb24nLFxyXG4gIHR5cGU6ICdvYmplY3QnLFxyXG4gIHJlcXVpcmVkOiBbJ21ldGFkYXRhJywgJ2Zyb250X21hdHRlcicsICd0aXR1bG9zJywgJ2Rpc3Bvc2ljaW9uZXMnXSxcclxuICBhZGRpdGlvbmFsUHJvcGVydGllczogZmFsc2UsXHJcbiAgcHJvcGVydGllczoge1xyXG4gICAgbWV0YWRhdGE6IHtcclxuICAgICAgdHlwZTogJ29iamVjdCcsXHJcbiAgICAgIHJlcXVpcmVkOiBbJ2RvY3VtZW50X3RpdGxlJywgJ3NvdXJjZScsICdsYW5ndWFnZScsICdnZW5lcmF0ZWRfYXQnXSxcclxuICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlLFxyXG4gICAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgZG9jdW1lbnRfdGl0bGU6IHsgdHlwZTogJ3N0cmluZycsIG1pbkxlbmd0aDogMSB9LFxyXG4gICAgICAgIHNvdXJjZTogeyB0eXBlOiAnc3RyaW5nJywgbWluTGVuZ3RoOiAxIH0sXHJcbiAgICAgICAgbGFuZ3VhZ2U6IHsgdHlwZTogJ3N0cmluZycsIGNvbnN0OiAnZXMnIH0sXHJcbiAgICAgICAgZ2VuZXJhdGVkX2F0OiB7IHR5cGU6ICdzdHJpbmcnLCBmb3JtYXQ6ICdkYXRlJyB9LFxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIGZyb250X21hdHRlcjoge1xyXG4gICAgICB0eXBlOiAnb2JqZWN0JyxcclxuICAgICAgcmVxdWlyZWQ6IFsncHJlYW1idWxvJywgJ2V4cG9zaWNpb25fbW90aXZvcyddLFxyXG4gICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogZmFsc2UsXHJcbiAgICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBwcmVhbWJ1bG86IHsgJHJlZjogJyMvJGRlZnMvZnJvbnRNYXR0ZXJFbnRyeScgfSxcclxuICAgICAgICBleHBvc2ljaW9uX21vdGl2b3M6IHsgJHJlZjogJyMvJGRlZnMvZnJvbnRNYXR0ZXJFbnRyeScgfSxcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgICB0aXR1bG9zOiB7XHJcbiAgICAgIHR5cGU6ICdhcnJheScsXHJcbiAgICAgIGl0ZW1zOiB7ICRyZWY6ICcjLyRkZWZzL3RpdHVsbycgfSxcclxuICAgIH0sXHJcbiAgICBkaXNwb3NpY2lvbmVzOiB7XHJcbiAgICAgIHR5cGU6ICdvYmplY3QnLFxyXG4gICAgICByZXF1aXJlZDogWydhZGljaW9uYWxlcycsICd0cmFuc2l0b3JpYXMnLCAnZGVyb2dhdG9yaWFzJywgJ2ZpbmFsZXMnXSxcclxuICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlLFxyXG4gICAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgYWRpY2lvbmFsZXM6IHsgdHlwZTogJ2FycmF5JywgaXRlbXM6IHsgJHJlZjogJyMvJGRlZnMvZGlzcG9zaWNpb25JdGVtJyB9IH0sXHJcbiAgICAgICAgdHJhbnNpdG9yaWFzOiB7IHR5cGU6ICdhcnJheScsIGl0ZW1zOiB7ICRyZWY6ICcjLyRkZWZzL2Rpc3Bvc2ljaW9uSXRlbScgfSB9LFxyXG4gICAgICAgIGRlcm9nYXRvcmlhczogeyB0eXBlOiAnYXJyYXknLCBpdGVtczogeyAkcmVmOiAnIy8kZGVmcy9kaXNwb3NpY2lvbkl0ZW0nIH0gfSxcclxuICAgICAgICBmaW5hbGVzOiB7IHR5cGU6ICdhcnJheScsIGl0ZW1zOiB7ICRyZWY6ICcjLyRkZWZzL2Rpc3Bvc2ljaW9uSXRlbScgfSB9LFxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICB9LFxyXG4gICRkZWZzOiB7XHJcbiAgICBmcm9udE1hdHRlckVudHJ5OiB7XHJcbiAgICAgIHR5cGU6ICdvYmplY3QnLFxyXG4gICAgICByZXF1aXJlZDogWydwcmVzZW50JywgJ2FuY2hvcicsICdwYWdlcyddLFxyXG4gICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogZmFsc2UsXHJcbiAgICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBwcmVzZW50OiB7IHR5cGU6ICdib29sZWFuJyB9LFxyXG4gICAgICAgIGFuY2hvcjogeyB0eXBlOiBbJ3N0cmluZycsICdudWxsJ10gfSxcclxuICAgICAgICBwYWdlczoge1xyXG4gICAgICAgICAgYW55T2Y6IFtcclxuICAgICAgICAgICAgeyB0eXBlOiAnbnVsbCcgfSxcclxuICAgICAgICAgICAgeyB0eXBlOiAnYXJyYXknLCBpdGVtczogeyB0eXBlOiAnaW50ZWdlcicsIG1pbmltdW06IDEgfSwgbWluSXRlbXM6IDEsIG1heEl0ZW1zOiAyIH0sXHJcbiAgICAgICAgICBdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgdGl0dWxvOiB7XHJcbiAgICAgIHR5cGU6ICdvYmplY3QnLFxyXG4gICAgICByZXF1aXJlZDogWydvcmRpbmFsJywgJ3RpdHVsb190ZXh0bycsICdhbmNob3InLCAncGFnZXMnLCAnY2FwaXR1bG9zJywgJ2FydGljdWxvcyddLFxyXG4gICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogZmFsc2UsXHJcbiAgICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBvcmRpbmFsOiB7IHR5cGU6ICdzdHJpbmcnLCBtaW5MZW5ndGg6IDEgfSxcclxuICAgICAgICB0aXR1bG9fdGV4dG86IHsgdHlwZTogJ3N0cmluZycsIG1pbkxlbmd0aDogMSB9LFxyXG4gICAgICAgIGFuY2hvcjogeyB0eXBlOiAnc3RyaW5nJywgbWluTGVuZ3RoOiAxIH0sXHJcbiAgICAgICAgcGFnZXM6IHsgJHJlZjogJyMvJGRlZnMvcGFnZVJhbmdlJyB9LFxyXG4gICAgICAgIGNhcGl0dWxvczogeyB0eXBlOiAnYXJyYXknLCBpdGVtczogeyAkcmVmOiAnIy8kZGVmcy9jYXBpdHVsbycgfSB9LFxyXG4gICAgICAgIGFydGljdWxvczogeyB0eXBlOiAnYXJyYXknLCBpdGVtczogeyAkcmVmOiAnIy8kZGVmcy9hcnRpY3VsbycgfSB9LFxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIGNhcGl0dWxvOiB7XHJcbiAgICAgIHR5cGU6ICdvYmplY3QnLFxyXG4gICAgICByZXF1aXJlZDogWydvcmRpbmFsJywgJ2NhcGl0dWxvX3RleHRvJywgJ2FuY2hvcicsICdwYWdlcycsICdzZWNjaW9uZXMnLCAnYXJ0aWN1bG9zJ10sXHJcbiAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZSxcclxuICAgICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIG9yZGluYWw6IHsgdHlwZTogJ3N0cmluZycsIG1pbkxlbmd0aDogMSB9LFxyXG4gICAgICAgIGNhcGl0dWxvX3RleHRvOiB7IHR5cGU6ICdzdHJpbmcnLCBtaW5MZW5ndGg6IDEgfSxcclxuICAgICAgICBhbmNob3I6IHsgdHlwZTogJ3N0cmluZycsIG1pbkxlbmd0aDogMSB9LFxyXG4gICAgICAgIHBhZ2VzOiB7ICRyZWY6ICcjLyRkZWZzL3BhZ2VSYW5nZScgfSxcclxuICAgICAgICBzZWNjaW9uZXM6IHsgdHlwZTogJ2FycmF5JywgaXRlbXM6IHsgJHJlZjogJyMvJGRlZnMvc2VjY2lvbicgfSB9LFxyXG4gICAgICAgIGFydGljdWxvczogeyB0eXBlOiAnYXJyYXknLCBpdGVtczogeyAkcmVmOiAnIy8kZGVmcy9hcnRpY3VsbycgfSB9LFxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIHNlY2Npb246IHtcclxuICAgICAgdHlwZTogJ29iamVjdCcsXHJcbiAgICAgIHJlcXVpcmVkOiBbJ29yZGluYWwnLCAnc2VjY2lvbl90ZXh0bycsICdhbmNob3InLCAncGFnZXMnLCAnYXJ0aWN1bG9zJ10sXHJcbiAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZSxcclxuICAgICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIG9yZGluYWw6IHsgdHlwZTogJ3N0cmluZycsIG1pbkxlbmd0aDogMSB9LFxyXG4gICAgICAgIHNlY2Npb25fdGV4dG86IHsgdHlwZTogJ3N0cmluZycsIG1pbkxlbmd0aDogMSB9LFxyXG4gICAgICAgIGFuY2hvcjogeyB0eXBlOiAnc3RyaW5nJywgbWluTGVuZ3RoOiAxIH0sXHJcbiAgICAgICAgcGFnZXM6IHsgJHJlZjogJyMvJGRlZnMvcGFnZVJhbmdlJyB9LFxyXG4gICAgICAgIGFydGljdWxvczogeyB0eXBlOiAnYXJyYXknLCBpdGVtczogeyAkcmVmOiAnIy8kZGVmcy9hcnRpY3VsbycgfSB9LFxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIGFydGljdWxvOiB7XHJcbiAgICAgIHR5cGU6ICdvYmplY3QnLFxyXG4gICAgICByZXF1aXJlZDogWydudW1lcm8nLCAnYXJ0aWN1bG9fdGV4dG8nLCAnYW5jaG9yJywgJ3BhZ2VzJ10sXHJcbiAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZSxcclxuICAgICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIG51bWVybzogeyB0eXBlOiAnc3RyaW5nJywgbWluTGVuZ3RoOiAxIH0sXHJcbiAgICAgICAgYXJ0aWN1bG9fdGV4dG86IHsgdHlwZTogJ3N0cmluZycsIG1pbkxlbmd0aDogMSB9LFxyXG4gICAgICAgIGFuY2hvcjogeyB0eXBlOiAnc3RyaW5nJywgbWluTGVuZ3RoOiAxIH0sXHJcbiAgICAgICAgcGFnZXM6IHsgJHJlZjogJyMvJGRlZnMvcGFnZVJhbmdlJyB9LFxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIGRpc3Bvc2ljaW9uSXRlbToge1xyXG4gICAgICB0eXBlOiAnb2JqZWN0JyxcclxuICAgICAgcmVxdWlyZWQ6IFsnbnVtZXJvJywgJ3RleHRvX2VuY2FiZXphZG8nLCAnYW5jaG9yJywgJ3BhZ2VzJ10sXHJcbiAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZSxcclxuICAgICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIG51bWVybzogeyB0eXBlOiAnc3RyaW5nJywgbWluTGVuZ3RoOiAxIH0sXHJcbiAgICAgICAgdGV4dG9fZW5jYWJlemFkbzogeyB0eXBlOiAnc3RyaW5nJywgbWluTGVuZ3RoOiAxIH0sXHJcbiAgICAgICAgYW5jaG9yOiB7IHR5cGU6ICdzdHJpbmcnLCBtaW5MZW5ndGg6IDEgfSxcclxuICAgICAgICBwYWdlczogeyAkcmVmOiAnIy8kZGVmcy9wYWdlUmFuZ2UnIH0sXHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgcGFnZVJhbmdlOiB7XHJcbiAgICAgIHR5cGU6ICdhcnJheScsXHJcbiAgICAgIGl0ZW1zOiB7IHR5cGU6ICdpbnRlZ2VyJywgbWluaW11bTogMSB9LFxyXG4gICAgICBtaW5JdGVtczogMCxcclxuICAgIH0sXHJcbiAgfSxcclxufSBhcyBjb25zdFxyXG5cclxuXHJcblxyXG4iXSwibmFtZXMiOlsibWVudGFsT3V0bGluZVNjaGVtYSIsIiRzY2hlbWEiLCIkaWQiLCJ0eXBlIiwicmVxdWlyZWQiLCJhZGRpdGlvbmFsUHJvcGVydGllcyIsInByb3BlcnRpZXMiLCJtZXRhZGF0YSIsImRvY3VtZW50X3RpdGxlIiwibWluTGVuZ3RoIiwic291cmNlIiwibGFuZ3VhZ2UiLCJjb25zdCIsImdlbmVyYXRlZF9hdCIsImZvcm1hdCIsImZyb250X21hdHRlciIsInByZWFtYnVsbyIsIiRyZWYiLCJleHBvc2ljaW9uX21vdGl2b3MiLCJ0aXR1bG9zIiwiaXRlbXMiLCJkaXNwb3NpY2lvbmVzIiwiYWRpY2lvbmFsZXMiLCJ0cmFuc2l0b3JpYXMiLCJkZXJvZ2F0b3JpYXMiLCJmaW5hbGVzIiwiJGRlZnMiLCJmcm9udE1hdHRlckVudHJ5IiwicHJlc2VudCIsImFuY2hvciIsInBhZ2VzIiwiYW55T2YiLCJtaW5pbXVtIiwibWluSXRlbXMiLCJtYXhJdGVtcyIsInRpdHVsbyIsIm9yZGluYWwiLCJ0aXR1bG9fdGV4dG8iLCJjYXBpdHVsb3MiLCJhcnRpY3Vsb3MiLCJjYXBpdHVsbyIsImNhcGl0dWxvX3RleHRvIiwic2VjY2lvbmVzIiwic2VjY2lvbiIsInNlY2Npb25fdGV4dG8iLCJhcnRpY3VsbyIsIm51bWVybyIsImFydGljdWxvX3RleHRvIiwiZGlzcG9zaWNpb25JdGVtIiwidGV4dG9fZW5jYWJlemFkbyIsInBhZ2VSYW5nZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/schema/mentalOutline.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/formdata-node","vendor-chunks/ajv","vendor-chunks/openai","vendor-chunks/form-data-encoder","vendor-chunks/whatwg-url","vendor-chunks/agentkeepalive","vendor-chunks/fast-uri","vendor-chunks/ajv-formats","vendor-chunks/tr46","vendor-chunks/web-streams-polyfill","vendor-chunks/node-fetch","vendor-chunks/webidl-conversions","vendor-chunks/ms","vendor-chunks/json-schema-traverse","vendor-chunks/humanize-ms","vendor-chunks/fast-deep-equal","vendor-chunks/event-target-shim","vendor-chunks/abort-controller"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmental-outline%2Fchunk%2Froute&page=%2Fapi%2Fmental-outline%2Fchunk%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmental-outline%2Fchunk%2Froute.ts&appDir=C%3A%5Ctfm-uoc-ia%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Ctfm-uoc-ia&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();